<html>
<head>
<link rel="icon" href="https://static.wikia.nocookie.net/growagarden/images/4/4a/Site-favicon.ico">
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>GAG Calc</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Varela+Round&display=swap');
</style>
<style>
/* Tùy chỉnh màu sắc và font chữ */
:root {
    --bg-primary: #121212;
    --bg-secondary: #1e1e1e;
    --card-bg: rgba(30, 30, 30, 0.8);
    --border-color: rgba(255, 255, 255, 0.1);
    --text-primary: #f0f0f0;
    --text-secondary: #b0b0b0;
    --accent-color-1: #667eea;
    --accent-color-2: #764ba2;
    --error-color: #ff6b6b;
    --primary-gradient: linear-gradient(135deg, var(--accent-color-1) 0%, var(--accent-color-2) 100%);
}

body {
    font-family: 'Varela Round', sans-serif;
    background-color: var(--bg-primary);
    color: var(--text-primary);
    margin: 0;
    padding: 20px;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
}

/* Kiểu dáng chung cho toàn bộ calculator */
.plant-calculator {
    background: var(--card-bg);
    backdrop-filter: blur(10px);
    border: 1px solid var(--border-color);
    border-radius: 20px;
    padding: 2rem;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    max-width: 600px;
    width: 100%;
    animation: fadeIn 0.8s ease-out;
}

h2 {
    text-align: center;
    font-size: 2rem;
    font-weight: 800;
    background: var(--primary-gradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 2rem;
}

label {
    display: block;
    font-weight: 600;
    margin-top: 1.5rem;
    margin-bottom: 0.5rem;
    color: var(--text-secondary);
}

/* Kiểu dáng cho các trường input và select */
select, input[type="number"] {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid var(--border-color);
    border-radius: 10px;
    background-color: var(--bg-secondary);
    color: var(--text-primary);
    font-family: 'Varela Round', sans-serif;
    font-size: 1rem;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
}

select:focus, input[type="number"]:focus {
    outline: none;
    border-color: var(--accent-color-1);
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.3);
}

/* Ẩn mũi tên mặc định trên select và input type="number" */
select::-ms-expand {
    display: none;
}
select {
    background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23b0b0b0%22%20d%3D%22M287%20197.8L154.4%2065.2c-4.4-4.4-11.4-4.4-15.8%200L5.4%20197.8c-4.4%204.4-4.4%2011.4%200%2015.8l15.8%2015.8c4.4%204.4%2011.4%204.4%2015.8%200L146.5%20121l111.4%20111.4c4.4%204.4%2011.4%204.4%2015.8%200l15.8-15.8c4.4-4.4%204.4-11.4%200-15.8z%22%2F%3E%3C%2Fsvg%3E');
    background-repeat: no-repeat;
    background-position: right 15px center;
    background-size: 12px;
}
input[type="number"]::-webkit-inner-spin-button, 
input[type="number"]::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
}
input[type="number"] {
    -moz-appearance: textfield;
}

/* Các tab mode */
.mode-toggle {
  display: flex;
  justify-content: center; /* căn giữa ngang các nút */
  gap: 14px; /* khoảng cách giữa các nút */
  margin-bottom: 20px;
}

.mode-tab {
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    background: var(--bg-secondary);
    color: var(--text-secondary);
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
}

.mode-tab:hover {
    background: rgba(255, 255, 255, 0.05);
}

.mode-tab.active-tab {
    background: var(--primary-gradient);
    color: white;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
}

/* Các checkbox mutation - ĐÃ CẬP NHẬT */
.mutations-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 0.8rem;
    margin-top: 1rem;
    border: 1px solid var(--border-color);
    padding: 1rem;
    border-radius: 10px;
    background-color: var(--bg-secondary);
}

.mutation-label {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    color: var(--text-secondary);
    transition: color 0.3s ease;
}

.mutation-label:hover {
    color: var(--text-primary);
}

.mutation-label input[type="checkbox"] {
    appearance: none;
    width: 18px;
    height: 18px;
    border: 2px solid var(--text-secondary);
    border-radius: 4px;
    cursor: pointer;
    position: relative;
    transition: all 0.3s ease;
}

.mutation-label input[type="checkbox"]:checked {
    background-color: var(--accent-color-1);
    border-color: var(--accent-color-1);
    animation: bounceIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.27);
}

.mutation-label input[type="checkbox"]:checked::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 16px;
    height: 16px;
    transform: translate(-50%, -50%);
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="%23ffffff" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"/></svg>');
    background-repeat: no-repeat;
    background-size: contain;
    animation: checkmark 0.3s ease-out forwards;
}

/* Nút bấm */
.button-container {
    display: flex;
    gap: 1rem;
    justify-content: center;
    margin-top: 2.5rem;
}

.calculate-btn, .reset-btn {
    padding: 12px 25px;
    border: none;
    border-radius: 12px;
    font-size: 1.1rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
}

.calculate-btn {
    background: var(--primary-gradient);
    color: white;
    box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3);
}

.calculate-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
}

.reset-btn {
    background: var(--bg-secondary);
    color: var(--text-secondary);
    border: 1px solid var(--border-color);
}

.reset-btn:hover {
    transform: translateY(-2px);
    background-color: rgba(255, 255, 255, 0.05);
    color: var(--text-primary);
}

/* Khu vực kết quả - ĐÃ CẬP NHẬT */
.result {
    margin-top: 2rem;
    padding: 1.5rem;
    border: 1px dashed var(--accent-color-1);
    border-radius: 12px;
    text-align: center;
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--text-primary);
    background: rgba(102, 126, 234, 0.1);
    animation: fadeIn 0.5s ease-out;
}

/* Kiểu dáng cho thông báo lỗi */
.result.error {
    background-color: rgba(255, 107, 107, 0.1);
    border-color: var(--error-color);
    color: var(--error-color);
}

/* Animations */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes bounceIn {
    0% { transform: scale(0.9); opacity: 0; }
    50% { transform: scale(1.1); opacity: 1; }
    100% { transform: scale(1); }
}

@keyframes checkmark {
    from {
        transform: translate(-50%, -50%) scale(0.5);
        opacity: 0;
    }
    to {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
    }
}

/* Responsive design */
@media (max-width: 600px) {
    .plant-calculator {
        padding: 1.5rem;
        margin: 10px;
    }

    h2 {
        font-size: 1.5rem;
    }
    
    .mutations-container {
        grid-template-columns: 1fr;
    }

    .button-container {
        flex-direction: column;
    }
    
    .calculate-btn, .reset-btn {
        width: 100%;
    }
}
/* Custom scrollbar for Webkit browsers (Chrome, Safari, Edge) */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: var(--bg-secondary);
  border-radius: 10px;
}

::-webkit-scrollbar-thumb {
  background: var(--accent-color-1);
  border-radius: 10px;
  border: 2px solid var(--bg-secondary);
}

::-webkit-scrollbar-thumb:hover {
  background: var(--accent-color-2);
}

/* Fallback for Firefox */
/* Lưu ý: Firefox chỉ hỗ trợ tùy chỉnh màu sắc cơ bản, không tùy chỉnh hình dạng */
@supports (scrollbar-color: var(--accent-color-1) var(--bg-secondary)) {
  * {
    scrollbar-color: var(--accent-color-1) var(--bg-secondary);
    scrollbar-width: thin;
  }
}
</style>
</head>
<body>

<div class="plant-calculator">
    <div id="template-content" style="display: block;"></div><h2 id="sec-6">Value Calculator</h2>
    <div class="mode-toggle" style="justify-content: center; margin-bottom: 20px;">
    <button id="mode-value" class="mode-tab active-tab">Calculate Value</button>
    <button id="mode-weight" class="mode-tab">Calculate Weight</button>
    </div>

    <label for="fruit-select">Fruit:</label>
    <select id="fruit-select"><option value="">Select a fruit...</option><option value="Aloe Vera">Aloe Vera</option><option value="Amber Spine">Amber Spine</option><option value="Apple">Apple</option><option value="Artichoke">Artichoke</option><option value="Avocado">Avocado</option><option value="Badland Pepper">Badland Pepper</option><option value="Bamboo">Bamboo</option><option value="Banana">Banana</option><option value="Beanstalk">Beanstalk</option><option value="Bee Balm">Bee Balm</option><option value="Bell Pepper">Bell Pepper</option><option value="Bendboo">Bendboo</option><option value="Bitter Melon">Bitter Melon</option><option value="Blood Banana">Blood Banana</option><option value="Blue Lollipop">Blue Lollipop</option><option value="Blueberry">Blueberry</option><option value="Bone Blossom">Bone Blossom</option><option value="Boneboo">Boneboo</option><option value="Burning Bud">Burning Bud</option><option value="Butternut Squash">Butternut Squash</option><option value="Cacao">Cacao</option><option value="Cactus">Cactus</option><option value="Candy Blossom">Candy Blossom</option><option value="Candy Sunflower">Candy Sunflower</option><option value="Cantaloupe">Cantaloupe</option><option value="Carrot">Carrot</option><option value="Cauliflower">Cauliflower</option><option value="Celestiberry">Celestiberry</option><option value="Cherry Blossom">Cherry Blossom</option><option value="Chocolate Carrot">Chocolate Carrot</option><option value="Coconut">Coconut</option><option value="Cocovine">Cocovine</option><option value="Corn">Corn</option><option value="Cranberry">Cranberry</option><option value="Crimson Vine">Crimson Vine</option><option value="Crocus">Crocus</option><option value="Crown Melon">Crown Melon</option><option value="Cursed Fruit">Cursed Fruit</option><option value="Daffodil">Daffodil</option><option value="Dandelion">Dandelion</option><option value="Delphinium">Delphinium</option><option value="Dezen">Dezen</option><option value="Dragon Fruit">Dragon Fruit</option><option value="Dragon Pepper">Dragon Pepper</option><option value="Durian">Durian</option><option value="Easter Egg">Easter Egg</option><option value="Eggplant">Eggplant</option><option value="Elder Strawberry">Elder Strawberry</option><option value="Elephant Ears">Elephant Ears</option><option value="Ember Lily">Ember Lily</option><option value="Enkaku">Enkaku</option><option value="Feijoa">Feijoa</option><option value="Firefly Fern">Firefly Fern</option><option value="Firework Flower">Firework Flower</option><option value="Fossilight">Fossilight</option><option value="Foxglove">Foxglove</option><option value="Fruit Ball">Fruit Ball</option><option value="Giant Pinecone">Giant Pinecone</option><option value="Glowshroom">Glowshroom</option><option value="Grand Tomato">Grand Tomato</option><option value="Grand Volcania">Grand Volcania</option><option value="Grape">Grape</option><option value="Green Apple">Green Apple</option><option value="Guanabana">Guanabana</option><option value="Hinomai">Hinomai</option><option value="Hive Fruit">Hive Fruit</option><option value="Honeysuckle">Honeysuckle</option><option value="Horned Dinoshroom">Horned Dinoshroom</option><option value="Horsetail">Horsetail</option><option value="Ice Cream Bean">Ice Cream Bean</option><option value="Jalapeno">Jalapeno</option><option value="King Cabbage">King Cabbage</option><option value="Kiwi">Kiwi</option><option value="Lavender">Lavender</option><option value="Lemon">Lemon</option><option value="Liberty Lily">Liberty Lily</option><option value="Lilac">Lilac</option><option value="Lily of the Valley">Lily of the Valley</option><option value="Lime">Lime</option><option value="Lingonberry">Lingonberry</option><option value="Loquat">Loquat</option><option value="Lotus">Lotus</option><option value="Lucky Bamboo">Lucky Bamboo</option><option value="Lumira">Lumira</option><option value="Mango">Mango</option><option value="Manuka Flower">Manuka Flower</option><option value="Maple Apple">Maple Apple</option><option value="Mega Mushroom">Mega Mushroom</option><option value="Merica Mushroom">Merica Mushroom</option><option value="Mint">Mint</option><option value="Mono Blooma">Mono Blooma</option><option value="Moon Blossom">Moon Blossom</option><option value="Moon Mango">Moon Mango</option><option value="Moon Melon">Moon Melon</option><option value="Moonflower">Moonflower</option><option value="Moonglow">Moonglow</option><option value="Mushroom">Mushroom</option><option value="Nectar Thorn">Nectar Thorn</option><option value="Nectarine">Nectarine</option><option value="Nectarshade">Nectarshade</option><option value="Nightshade">Nightshade</option><option value="Noble Flower">Noble Flower</option><option value="Onion">Onion</option><option value="Orange Tulip">Orange Tulip</option><option value="Papaya">Papaya</option><option value="Paradise Petal">Paradise Petal</option><option value="Parasol Flower">Parasol Flower</option><option value="Passionfruit">Passionfruit</option><option value="Peace Lily">Peace Lily</option><option value="Peach">Peach</option><option value="Pear">Pear</option><option value="Pepper">Pepper</option><option value="Pineapple">Pineapple</option><option value="Pink Lily">Pink Lily</option><option value="Pink Tulip">Pink Tulip</option><option value="Pitcher Plant">Pitcher Plant</option><option value="Prickle Fruit">Prickle Fruit</option><option value="Prickly Pear">Prickly Pear</option><option value="Pumpkin">Pumpkin</option><option value="Purple Cabbage">Purple Cabbage</option><option value="Purple Dahlia">Purple Dahlia</option><option value="Rafflesia">Rafflesia</option><option value="Raspberry">Raspberry</option><option value="Red Lollipop">Red Lollipop</option><option value="Rhubarb">Rhubarb</option><option value="Rose">Rose</option><option value="Rosy Delight">Rosy Delight</option><option value="Sakura Bush">Sakura Bush</option><option value="Serenity">Serenity</option><option value="Soft Sunshine">Soft Sunshine</option><option value="Soul Fruit">Soul Fruit</option><option value="Spiked Mango">Spiked Mango</option><option value="Spring Onion">Spring Onion</option><option value="Starfruit">Starfruit</option><option value="Stonebite">Stonebite</option><option value="Strawberry">Strawberry</option><option value="Succulent">Succulent</option><option value="Sugar Apple">Sugar Apple</option><option value="Sugar Glaze">Sugar Glaze</option><option value="Suncoil">Suncoil</option><option value="Sunflower">Sunflower</option><option value="Taco Fern">Taco Fern</option><option value="Tall Asparagus">Tall Asparagus</option><option value="Taro Flower">Taro Flower</option><option value="Tomato">Tomato</option><option value="Tranquil Bloom">Tranquil Bloom</option><option value="Traveler's Fruit">Traveler's Fruit</option><option value="Twisted Tangle">Twisted Tangle</option><option value="Vein Petal">Vein Petal</option><option value="Venus Fly Trap">Venus Fly Trap</option><option value="Violet Corn">Violet Corn</option><option value="Watermelon">Watermelon</option><option value="White Mulberry">White Mulberry</option><option value="Wild Carrot">Wild Carrot</option><option value="Zen Flare">Zen Flare</option><option value="Zen Rocks">Zen Rocks</option></select>

<!-- Value Mode -->
<div id="value-mode-section" style="display: block;">
  <label for="weight-input">Weight (kg):</label>
  <input type="number" id="weight-input" step="0.001" min="0" placeholder="Enter weight in kg">
</div>

<!-- Weight Mode -->
<div id="weight-mode-section" style="display: none;">
  <label for="value-input">Target Value (¢):</label>
  <input type="number" id="value-input" step="1" min="0" placeholder="Enter target value in cents">
</div>

    <label for="variant-select">Variant:</label>
    <select id="variant-select"><option value="Normal">Normal (1x)</option><option value="Gold">Gold (20x)</option><option value="Rainbow">Rainbow (50x)</option></select>

    <label>Mutations:</label>
    <div class="mutations-container" id="mutations-container"><label class="mutation-label"><input type="checkbox" value="Acidic" name="mutation">Acidic (15x)</label><label class="mutation-label"><input type="checkbox" value="Alienlike" name="mutation">Alienlike (100x)</label><label class="mutation-label"><input type="checkbox" value="Amber" name="mutation">Amber (10x)</label><label class="mutation-label"><input type="checkbox" value="AncientAmber" name="mutation">AncientAmber (50x)</label><label class="mutation-label"><input type="checkbox" value="Aromatic" name="mutation">Aromatic (15x)</label><label class="mutation-label"><input type="checkbox" value="Aurora" name="mutation">Aurora (90x)</label><label class="mutation-label"><input type="checkbox" value="Blitzshock" name="mutation">Blitzshock (50x)</label><label class="mutation-label"><input type="checkbox" value="Bloodlit" name="mutation">Bloodlit (4x)</label><label class="mutation-label"><input type="checkbox" value="Boil" name="mutation">Boil (15x)</label><label class="mutation-label"><input type="checkbox" value="Burnt" name="mutation">Burnt (4x)</label><label class="mutation-label"><input type="checkbox" value="Celestial" name="mutation">Celestial (120x)</label><label class="mutation-label"><input type="checkbox" value="Ceramic" name="mutation">Ceramic (30x)</label><label class="mutation-label"><input type="checkbox" value="Chakra" name="mutation">Chakra (15x)</label><label class="mutation-label"><input type="checkbox" value="Chilled" name="mutation">Chilled (2x)</label><label class="mutation-label"><input type="checkbox" value="Choc" name="mutation">Choc (2x)</label><label class="mutation-label"><input type="checkbox" value="Clay" name="mutation">Clay (5x)</label><label class="mutation-label"><input type="checkbox" value="Cloudtouched" name="mutation">Cloudtouched (5x)</label><label class="mutation-label"><input type="checkbox" value="Cooked" name="mutation">Cooked (10x)</label><label class="mutation-label"><input type="checkbox" value="Corrupt" name="mutation">Corrupt (20x)</label><label class="mutation-label"><input type="checkbox" value="Dawnbound" name="mutation">Dawnbound (150x)</label><label class="mutation-label"><input type="checkbox" value="Disco" name="mutation">Disco (125x)</label><label class="mutation-label"><input type="checkbox" value="Drenched" name="mutation">Drenched (5x)</label><label class="mutation-label"><input type="checkbox" value="Foxfire" name="mutation">Foxfire (90x)</label><label class="mutation-label"><input type="checkbox" value="Fried" name="mutation">Fried (8x)</label><label class="mutation-label"><input type="checkbox" value="Friendbound" name="mutation">Friendbound (70x)</label><label class="mutation-label"><input type="checkbox" value="Frozen" name="mutation">Frozen (10x)</label><label class="mutation-label"><input type="checkbox" value="Galactic" name="mutation">Galactic (120x)</label><label class="mutation-label"><input type="checkbox" value="Harmonisedchakra" name="mutation">Harmonisedchakra (35x)</label><label class="mutation-label"><input type="checkbox" value="Harmonisedfoxfire" name="mutation">Harmonisedfoxfire (190x)</label><label class="mutation-label"><input type="checkbox" value="Heavenly" name="mutation">Heavenly (5x)</label><label class="mutation-label"><input type="checkbox" value="HoneyGlazed" name="mutation">HoneyGlazed (5x)</label><label class="mutation-label"><input type="checkbox" value="Infected" name="mutation">Infected (75x)</label><label class="mutation-label"><input type="checkbox" value="Jackpot" name="mutation">Jackpot (15x)</label><label class="mutation-label"><input type="checkbox" value="Junkshock" name="mutation">Junkshock (45x)</label><label class="mutation-label"><input type="checkbox" value="Meatball" name="mutation">Meatball (3x)</label><label class="mutation-label"><input type="checkbox" value="Meteoric" name="mutation">Meteoric (125x)</label><label class="mutation-label"><input type="checkbox" value="Molten" name="mutation">Molten (25x)</label><label class="mutation-label"><input type="checkbox" value="Moonlit" name="mutation">Moonlit (2x)</label><label class="mutation-label"><input type="checkbox" value="Oil" name="mutation">Oil (15x)</label><label class="mutation-label"><input type="checkbox" value="OldAmber" name="mutation">OldAmber (20x)</label><label class="mutation-label"><input type="checkbox" value="Paradisal" name="mutation">Paradisal (100x)</label><label class="mutation-label"><input type="checkbox" value="Pasta" name="mutation">Pasta (3x)</label><label class="mutation-label"><input type="checkbox" value="Plasma" name="mutation">Plasma (5x)</label><label class="mutation-label"><input type="checkbox" value="Pollinated" name="mutation">Pollinated (3x)</label><label class="mutation-label"><input type="checkbox" value="Radioactive" name="mutation">Radioactive (80x)</label><label class="mutation-label"><input type="checkbox" value="Sandy" name="mutation">Sandy (3x)</label><label class="mutation-label"><input type="checkbox" value="Sauce" name="mutation">Sauce (3x)</label><label class="mutation-label"><input type="checkbox" value="Shocked" name="mutation">Shocked (100x)</label><label class="mutation-label"><input type="checkbox" value="Sliced" name="mutation">Sliced (50x)</label><label class="mutation-label"><input type="checkbox" value="Spaghetti" name="mutation">Spaghetti (12x)</label><label class="mutation-label"><input type="checkbox" value="Static" name="mutation">Static (8x)</label><label class="mutation-label"><input type="checkbox" value="Subzero" name="mutation">Subzero (40x)</label><label class="mutation-label"><input type="checkbox" value="Sundried" name="mutation">Sundried (85x)</label><label class="mutation-label"><input type="checkbox" value="Tempestuous" name="mutation">Tempestuous (12x)</label><label class="mutation-label"><input type="checkbox" value="Touchdown" name="mutation">Touchdown (105x)</label><label class="mutation-label"><input type="checkbox" value="Toxic" name="mutation">Toxic (12x)</label><label class="mutation-label"><input type="checkbox" value="Tranquil" name="mutation">Tranquil (20x)</label><label class="mutation-label"><input type="checkbox" value="Twisted" name="mutation">Twisted (5x)</label><label class="mutation-label"><input type="checkbox" value="Verdant" name="mutation">Verdant (4x)</label><label class="mutation-label"><input type="checkbox" value="Voidtouched" name="mutation">Voidtouched (135x)</label><label class="mutation-label"><input type="checkbox" value="Wet" name="mutation">Wet (2x)</label><label class="mutation-label"><input type="checkbox" value="Wiltproof" name="mutation">Wiltproof (4x)</label><label class="mutation-label"><input type="checkbox" value="Windstruck" name="mutation">Windstruck (2x)</label><label class="mutation-label"><input type="checkbox" value="Zombified" name="mutation">Zombified (25x)</label></div>
    
    <div class="button-container">
        <button class="reset-btn" id="reset-btn" style="display: none">Reset</button>
        <button class="calculate-btn" id="calculate-btn">Calculate Value</button>
    </div>
    <div class="result" id="result">Hi, user</div>
</div>

<script data-rocket-status="executed">

    // ——— ITEM DATA ———

    const itemData = {
 "Aloe Vera": [
        5.5,
        69000,
        350
    ],
    "Apple": [
        3,
        275,
        50
    ],
    "Avocado": [
        6.5,
        350,
        300
    ],
    "Bamboo": [
        4,
        4000,
        35
    ],
    "Banana": [
        1.5,
        1750,
        100
    ],
    "Beanstalk": [
        10,
        28000,
        300
    ],
    "Bee Balm": [
        1,
        18000,
        200
    ],
    "Bell Pepper": [
        8,
        5500,
        325
    ],
    "Bendboo": [
        18,
        155000,
        275
    ],
    "Blood Banana": [
        1.5,
        6000,
        200
    ],
    "Blue Lollipop": [
        1,
        50000,
        65
    ],
    "Blueberry": [
        0.2,
        20,
        100
    ],
    "Bone Blossom": [
        7,
        175000,
        200
    ],
    "Boneboo": [
        15,
        141141,
        300
    ],
    "Burning Bud": [
        12,
        70000,
        500
    ],
    "Cacao": [
        8,
        12000,
        250
    ],
    "Cactus": [
        7,
        3400,
        100
    ],
    "Candy Blossom": [
        3,
        100000,
        40
    ],
    "Candy Sunflower": [
        1.5,
        80000,
        85
    ],
    "Cantaloupe": [
        5.5,
        34000,
        250
    ],
    "Carrot": [
        0.275,
        20,
        100
    ],
    "Cauliflower": [
        5,
        50,
        150
    ],
    "Celestiberry": [
        2,
        10000,
        200
    ],
    "Cherry Blossom": [
        3,
        500,
        400
    ],
    "Chocolate Carrot": [
        0.275,
        11000,
        100
    ],
    "Coconut": [
        14,
        400,
        70
    ],
    "Cocovine": [
        14,
        66666,
        275
    ],
    "Corn": [
        2,
        40,
        100
    ],
    "Cranberry": [
        1,
        3500,
        50
    ],
    "Crimson Vine": [
        1,
        1250,
        100
    ],
    "Crocus": [
        0.275,
        30000,
        150
    ],
    "Cursed Fruit": [
        30,
        25750,
        200
    ],
    "Daffodil": [
        0.2,
        1000,
        45
    ],
    "Dandelion": [
        4,
        50000,
        300
    ],
    "Delphinium": [
        0.3,
        24000,
        100
    ],
    "Dragon Fruit": [
        12,
        4750,
        100
    ],
    "Dragon Pepper": [
        6,
        88888,
        300
    ],
    "Durian": [
        8,
        7500,
        200
    ],
    "Easter Egg": [
        3,
        2500,
        20
    ],
    "Eggplant": [
        5,
        12000,
        220
    ],
    "Elephant Ears": [
        18,
        77000,
        500
    ],
    "Ember Lily": [
        12,
        66666,
        450
    ],
    "Feijoa": [
        10,
        13000,
        400
    ],
    "Firefly Fern": [
        5,
        72000,
        400
    ],
    "Firework Flower": [
        20,
        151000,
        450
    ],
    "Fossilight": [
        4,
        88000,
        500
    ],
    "Foxglove": [
        2,
        20000,
        250
    ],
    "Glowshroom": [
        0.75,
        300,
        100
    ],
    "Grape": [
        3,
        7850,
        200
    ],
    "Green Apple": [
        3,
        300,
        200
    ],
    "Guanabana": [
        4,
        70500,
        400
    ],
    "Hive Fruit": [
        8,
        62000,
        300
    ],
    "Honeysuckle": [
        12,
        100000,
        400
    ],
    "Horned Dinoshroom": [
        5,
        69000,
        275
    ],
    "Ice Cream Bean": [
        4,
        4500,
        200
    ],
    "Kiwi": [
        5,
        2750,
        300
    ],
    "Lavender": [
        0.275,
        25000,
        90
    ],
    "Lemon": [
        1,
        350,
        50
    ],
    "Liberty Lily": [
        6.5,
        30000,
        350
    ],
    "Lilac": [
        3,
        35000,
        250
    ],
    "Lily of the Valley": [
        6,
        49120,
        400
    ],
    "Lime": [
        1,
        1000,
        125
    ],
    "Loquat": [
        6.5,
        8000,
        200
    ],
    "Lotus": [
        20,
        35000,
        650
    ],
    "Lumira": [
        6,
        85000,
        350
    ],
    "Mango": [
        15,
        6500,
        200
    ],
    "Manuka Flower": [
        0.3,
        25000,
        200
    ],
    "Mega Mushroom": [
        70,
        500,
        2000000
    ],
    "Merica Mushroom": [
        30,
        40000,
        20
    ],
    "Mint": [
        1,
        5250,
        150
    ],
    "Moon Blossom": [
        3,
        66666,
        400
    ],
    "Moon Mango": [
        15,
        50000,
        300
    ],
    "Moon Melon": [
        8,
        18000,
        300
    ],
    "Moonflower": [
        2,
        9500,
        200
    ],
    "Moonglow": [
        7,
        25000,
        400
    ],
    "Mushroom": [
        25,
        151000,
        220
    ],
    "Nectar Thorn": [
        7,
        44444,
        350
    ],
    "Nectarine": [
        3,
        48000,
        200
    ],
    "Nectarshade": [
        0.8,
        50000,
        100
    ],
    "Nightshade": [
        0.5,
        3500,
        100
    ],
    "Noble Flower": [
        5,
        20000,
        250
    ],
    "Orange Tulip": [
        0.05,
        850,
        55
    ],
    "Papaya": [
        3,
        1000,
        60
    ],
    "Paradise Petal": [
        2.75,
        25000,
        250
    ],
    "Parasol Flower": [
        6,
        200000,
        350
    ],
    "Passionfruit": [
        3,
        3550,
        40
    ],
    "Peace Lily": [
        0.6,
        24000,
        100
    ],
    "Peach": [
        2,
        300,
        70
    ],
    "Pear": [
        3,
        20000,
        120
    ],
    "Pepper": [
        5,
        8000,
        200
    ],
    "Pineapple": [
        3,
        2000,
        70
    ],
    "Pink Lily": [
        6,
        65000,
        400
    ],
    "Pink Tulip": [
        0.05,
        850,
        55
    ],
    "Pitcher Plant": [
        12,
        52000,
        275
    ],
    "Prickly Pear": [
        7,
        7000,
        375
    ],
    "Pumpkin": [
        8,
        3400,
        80
    ],
    "Purple Cabbage": [
        5,
        500,
        70
    ],
    "Purple Dahlia": [
        12,
        75000,
        400
    ],
    "Rafflesia": [
        8,
        3500,
        80
    ],
    "Raspberry": [
        0.75,
        100,
        70
    ],
    "Red Lollipop": [
        4,
        50000,
        65
    ],
    "Rose": [
        1,
        5000,
        100
    ],
    "Rosy Delight": [
        10,
        69000,
        450
    ],
    "Soul Fruit": [
        25,
        7750,
        200
    ],
    "Starfruit": [
        3,
        15000,
        250
    ],
    "Stonebite": [
        1,
        35000,
        200
    ],
    "Strawberry": [
        0.3,
        15,
        100
    ],
    "Succulent": [
        5,
        25000,
        175
    ],
    "Sugar Apple": [
        9,
        48000,
        200
    ],
    "Suncoil": [
        10,
        80000,
        400
    ],
    "Sunflower": [
        16.5,
        160000,
        600
    ],
    "Tomato": [
        0.5,
        30,
        100
    ],
    "Traveler's Fruit": [
        15,
        59000,
        500
    ],
    "Venus Fly Trap": [
        10,
        85000,
        650
    ],
    "Violet Corn": [
        3,
        50000,
        250
    ],
    "Watermelon": [
        7,
        3000,
        70
    ],
    "White Mulberry": [
        3,
        3000,
        200
    ],
    "Wild Carrot": [
        1.3,
        25000,
        100
    ],
"Horsetail": [2.85, 27075, -1],
"Giant Pinecone": [5.14, 64980, -1],
"Lingonberry": [0.485, 31588, -1],
"Grand Volcania": [6.65, 63676, -1],
"Amber Spine": [5.7, 49638, -1],
"Mono Blooma": [0.477, 19855, -1],
"Serenity": [0.24, 31588, -1],
"Soft Sunshine": [1.90, 40613, -1],
"Taro Flower": [6.64, 108300, -1],
"Spiked Mango": [14.25, 60919, -1],
"Zen Rocks": [17.1, 135375, -1],
"Hinomai": [9.5, 72200, -1],
"Maple Apple": [2.85, 51521, -1],
"Zen Flare": [1.34, 22563, -1],
"Dezen": [1.90, 26398, -1],
"Enkaku": [4.75, 55955, -1],
"Tranquil Bloom": [3.79, 84223, -1],
"Sakura Bush": [1.42, 25789, -1],
"Lucky Bamboo": [4.75, 58663, -1],
"Elder Strawberry": [5.37, 72092, -1],
"Fruit Ball": [5.72, 31588, -1],
"Twisted Tangle": [2.85, 18050, -1],
"Vein Petal": [7.8, 45125, -1],
"Artichoke": [1.43, 27075, -1],
"Crown Melon": [4.28, 45125, -1],
"Sugar Glaze": [1.00, 30000, -1],
"Jalapeno": [3.81, 27075, -1],
"Onion": [1.42, 9025, -1],
"Tall Asparagus": [6.5, 65952, -1],
"Grand Tomato": [7.6, 79420, -1],
"Taco Fern": [8.96, 74252, -1],
"Rhubarb": [1.90, 13538, -1],
"Badland Pepper": [3.33, 40613, -1],
"Prickle Fruit": [7.5, 70312, -1],
"Spring Onion": [1.42, 27075, -1],
"Butternut Squash": [4.5, 28309, -1],
"King Cabbage": [7.5, 83250, -1],
"Bitter Melon": [2.85, 50960, -1]
    };
    // ——— VARIANT MULTIPLIERS ———
    const variantMultipliers = {
        "Normal": 1,
        "Gold": 20,
        "Rainbow": 50,
    };

    // ——— MUTATION DATA ———
    const mutationData = [
{
    "name": "Meteoric",
    "valueMulti": 125
  },
  {
    "name": "Celestial",
    "valueMulti": 120
  },
  {
    "name": "Windstruck",
    "valueMulti": 2
  },
  {
    "name": "Fried",
    "valueMulti": 8
  },
  {
    "name": "Burnt",
    "valueMulti": 4
  },
  {
    "name": "Drenched",
    "valueMulti": 5
  },
  {
    "name": "Shocked",
    "valueMulti": 100
  },
  {
    "name": "Aurora",
    "valueMulti": 90
  },
  {
    "name": "Choc",
    "valueMulti": 2
  },
  {
    "name": "Bloodlit",
    "valueMulti": 4
  },
  {
    "name": "Paradisal",
    "valueMulti": 100
  },
  {
    "name": "Clay",
    "valueMulti": 5
  },
  {
    "name": "Amber",
    "valueMulti": 10
  },
  {
    "name": "Zombified",
    "valueMulti": 25
  },
  {
    "name": "HoneyGlazed",
    "valueMulti": 5
  },
  {
    "name": "Frozen",
    "valueMulti": 10
  },
  {
    "name": "OldAmber",
    "valueMulti": 20
  },
  {
    "name": "Verdant",
    "valueMulti": 4
  },
  {
    "name": "Sandy",
    "valueMulti": 3
  },
  {
    "name": "Moonlit",
    "valueMulti": 2
  },
  {
    "name": "AncientAmber",
    "valueMulti": 50
  },
  {
    "name": "Ceramic",
    "valueMulti": 30
  },
  {
    "name": "Pollinated",
    "valueMulti": 3
  },
  {
    "name": "Disco",
    "valueMulti": 125
  },
  {
    "name": "Twisted",
    "valueMulti": 5
  },
  {
    "name": "Alienlike",
    "valueMulti": 100
  },
  {
    "name": "Plasma",
    "valueMulti": 5
  },
  {
    "name": "Molten",
    "valueMulti": 25
  },
  {
    "name": "Dawnbound",
    "valueMulti": 150
  },
  {
    "name": "Cooked",
    "valueMulti": 10
  },
  {
    "name": "Chilled",
    "valueMulti": 2
  },
  {
    "name": "Heavenly",
    "valueMulti": 5
  },
  {
    "name": "Wiltproof",
    "valueMulti": 4
  },
  {
    "name": "Sundried",
    "valueMulti": 85
  },
  {
    "name": "Galactic",
    "valueMulti": 120
  },
  {
    "name": "Voidtouched",
    "valueMulti": 135
  },
  {
    "name": "Wet",
    "valueMulti": 2
  },
  {
    "name": "Cloudtouched",
    "valueMulti": 5
  },
{
  "name": "Friendbound",
  "valueMulti": 70
},
{
  "name": "Tempestuous",
  "valueMulti": 12
},
{
  "name": "Infected",
  "valueMulti": 75
},
{
  "name": "Tranquil",
  "valueMulti": 20
},
{
  "name": "Corrupt",
  "valueMulti": 20
},
{
  "name": "Chakra",
  "valueMulti": 15
},
{
  "name": "Harmonisedchakra",
  "valueMulti": 35
},
{
  "name": "Foxfire",
  "valueMulti": 90
},
{
  "name": "Harmonisedfoxfire",
  "valueMulti": 190
},
{
  "name": "Toxic",
  "valueMulti": 12
},
{
  "name": "Radioactive",
  "valueMulti": 80
},
{
  "name": "Jackpot",
  "valueMulti": 15
},
{
  "name": "Subzero",
  "valueMulti": 40
},
{
  "name": "Blitzshock",
  "valueMulti": 50
},
{
  "name": "Touchdown",
  "valueMulti": 105
},
{
  "name": "Static",
  "valueMulti": 8
},
{
  "name": "Sliced",
  "valueMulti": 50
},
{
  "name": "Sauce",
  "valueMulti": 3
},
{
  "name": "Pasta",
  "valueMulti": 3
},
{
  "name": "Meatball",
  "valueMulti": 3
},
{
  "name": "Spaghetti",
  "valueMulti": 12
},
{
  "name": "Acidic",
  "valueMulti": 15
},
{
  "name": "Aromatic",
  "valueMulti": 15
},
{
  "name": "Oil",
  "valueMulti": 15
},
{
  "name": "Boil",
  "valueMulti": 15
},
{
  "name": "Junkshock",
  "valueMulti": 45
}
    ];

    function Return_Data(itemName) {
        return itemData[itemName] ?? null;
    }

    /**
     * @param {string} variantName
     * @returns {number}
     */
    function Return_Multiplier(variantName) {
        return variantMultipliers[variantName] ?? 1;
    }

    /**
     * @param {{ Mutations: string[] }} plant
     * @returns {number}
     */
    function CalcValueMulti(plant) {
        if (!Array.isArray(plant.Mutations)) return 1;

        let sum = 1;
        for (const mutName of plant.Mutations) {
            const m = mutationData.find(m => m.name === mutName);
            if (m) sum += (m.valueMulti - 1);
        }

        return Math.max(1, sum);
    }

    /**
     * @param {{ Item_String: string, Variant: string, Weight: number, Mutations?: string[] }} plant
     * @returns {number}
     */
    function CalculatePlantValue(plant) {
        const itemName = plant.Item_String;
        const variant = plant.Variant;
        const weight = plant.Weight;
        if (!itemName || !variant || typeof weight !== "number") return 0;

        const data = Return_Data(itemName);
        if (!data) {
            console.warn("CalculatePlantValue | ItemData is invalid");
            return 0;
        }

        const [baseWeight, baseValue] = data;
        const clamped = Math.max(0.95, Math.min(weight / baseWeight, 1e8));
        const multi = CalcValueMulti(plant) * Return_Multiplier(variant);

        return Math.round(baseValue * multi * (clamped * clamped));
    }

    function populateFruitOptions() {
        const fruitSelect = document.getElementById("fruit-select");
        fruitSelect.innerHTML = '<option value="">Select a fruit...</option>';
        Object.keys(itemData).sort().forEach(fruit => {
            const option = document.createElement("option");
            option.value = fruit;
            option.textContent = fruit;
            fruitSelect.appendChild(option);
        });
    }

    function populateVariantOptions() {
        const variantSelect = document.getElementById("variant-select");
        variantSelect.innerHTML = '';
        Object.keys(variantMultipliers).forEach(variant => {
            const option = document.createElement("option");
            option.value = variant;
            option.textContent = variant + " (" + variantMultipliers[variant] + "x)";
            variantSelect.appendChild(option);
        });
    }

    // Populate mutation checkboxes
    function populateMutationOptions() {
        const container = document.getElementById("mutations-container");
        container.innerHTML = '';

        // Sort mutations alphabetically by name
        const sortedMutations = [...mutationData].sort((a, b) => a.name.localeCompare(b.name));

        sortedMutations.forEach((a) => {
            const label = document.createElement("label");
            label.className = 'mutation-label';

            const checkbox = document.createElement("input");
            checkbox.type = "checkbox";
            checkbox.value = a.name;
            checkbox.name = "mutation";

            label.appendChild(checkbox);
            label.appendChild(document.createTextNode(a.name + " (" + a.valueMulti + "x)"));
            container.appendChild(label);
        });
    }

    function onCalculateClick() {
        const fruitSelect = document.getElementById("fruit-select");
        const weightInput = document.getElementById("weight-input");
        const variantSelect = document.getElementById("variant-select");
        const mutationCheckboxes = document.querySelectorAll('input[name="mutation"]:checked');
        const resultDiv = document.getElementById("result");

        const plant = {
            Item_String: fruitSelect.value,
            Variant: variantSelect.value,
            Weight: parseFloat(weightInput.value),
            Mutations: Array.from(mutationCheckboxes).map(cb => cb.value)
        }

        resultDiv.classList.remove('error');

        if (!plant.Item_String) {
            resultDiv.textContent = "Please select a fruit.";
            resultDiv.classList.add('error');
            return;
        }
        if (isNaN(plant.Weight) || plant.Weight <= 0) {
            resultDiv.textContent = "Please enter a valid positive weight.";
            resultDiv.classList.add('error');
            return;
        }

        const finalValue = CalculatePlantValue(plant);
        resultDiv.textContent = `Final Plant Value: ¢${finalValue.toLocaleString()}`;
    }

    function onResetClick() {
        // Reset fruit selection
        document.getElementById("fruit-select").value = "";

        // Reset weight input
        document.getElementById("weight-input").value = "";

        // Reset variant to first option (Normal)
        document.getElementById("variant-select").value = "Normal";

        // Uncheck all mutation checkboxes
        const mutationCheckboxes = document.querySelectorAll('input[name="mutation"]');
        mutationCheckboxes.forEach(checkbox => {
            checkbox.checked = false;
        });

        // Reset result display
        const resultDiv = document.getElementById("result");
        resultDiv.textContent = "";
        resultDiv.classList.remove('error');
    }

    // Initialize when DOM is ready
    document.addEventListener('DOMContentLoaded', function () {
        populateFruitOptions();
        populateMutationOptions();
        populateVariantOptions();

        document.getElementById("calculate-btn").addEventListener("click", onCalculateClick);
        document.getElementById("reset-btn").addEventListener("click", onResetClick);

        // Add Enter key support for weight input
        document.getElementById("weight-input").addEventListener("keypress", function (e) {
            if (e.key === "Enter") {
                onCalculateClick();
            }
        });
    });

    // If DOMContentLoaded already fired, run immediately
    if (document.readyState === 'loading') {
        // Still loading, wait for DOMContentLoaded
    } else {
        // Already loaded
        populateFruitOptions();
        populateMutationOptions();
        populateVariantOptions();

        document.getElementById("calculate-btn").addEventListener("click", onCalculateClick);
        document.getElementById("reset-btn").addEventListener("click", onResetClick);

        document.getElementById("weight-input").addEventListener("keypress", function (e) {
            if (e.key === "Enter") {
                onCalculateClick();
            }
        });
    }

    let currentMode = "value";

function switchMode(mode) {
    currentMode = mode;
    document.getElementById("value-mode-section").style.display = mode === "value" ? "block" : "none";
    document.getElementById("weight-mode-section").style.display = mode === "weight" ? "block" : "none";
    document.getElementById("calculate-btn").textContent = mode === "value" ? "Calculate Value" : "Calculate Weight";

    document.getElementById("mode-value").classList.toggle("active-tab", mode === "value");
    document.getElementById("mode-weight").classList.toggle("active-tab", mode === "weight");
}

function CalculateWeightFromValue(plant, targetValue) {
    const data = Return_Data(plant.Item_String);
    if (!data) return 0;

    const [baseWeight, baseValue] = data;
    const totalMulti = CalcValueMulti(plant) * Return_Multiplier(plant.Variant);

    const divisor = baseValue * totalMulti;
    if (divisor <= 0 || targetValue <= 0) return 0;

    const weight = baseWeight * Math.sqrt(targetValue / divisor);
    return Math.round(weight * 1000) / 1000;
}



function onCalculateClick() {
    const fruit = document.getElementById("fruit-select").value;
    const variant = document.getElementById("variant-select").value;
    const mutations = Array.from(document.querySelectorAll('input[name="mutation"]:checked')).map(cb => cb.value);
    const resultDiv = document.getElementById("result");

    resultDiv.classList.remove('error');

    if (!fruit) {
        resultDiv.textContent = "Please select a fruit.";
        resultDiv.classList.add("error");
        return;
    }

    const plant = {
        Item_String: fruit,
        Variant: variant,
        Mutations: mutations
    };

    if (currentMode === "value") {
        const weight = parseFloat(document.getElementById("weight-input").value);
        if (isNaN(weight) || weight <= 0) {
            resultDiv.textContent = "Please enter a valid positive weight.";
            resultDiv.classList.add("error");
            return;
        }
        plant.Weight = weight;
        const val = CalculatePlantValue(plant);
        resultDiv.textContent = `Final Plant Value: ¢${val.toLocaleString()}`;
    } else {
        const targetValue = parseFloat(document.getElementById("value-input").value);
        if (isNaN(targetValue) || targetValue <= 0) {
            resultDiv.textContent = "Please enter a valid target value.";
            resultDiv.classList.add("error");
            return;
        }
        const w = CalculateWeightFromValue(plant, targetValue);
        const data = Return_Data(plant.Item_String);
        const [baseWeight] = data;
        const minThreshold = baseWeight * 0.95;

        if (w <= minThreshold + 0.001) { // Small tolerance for floating point
            resultDiv.textContent = `Estimated Weight Required: ≤${w.toLocaleString()} kg (at minimum threshold)`;
        } else {
            resultDiv.textContent = `Estimated Weight Required: ${w.toLocaleString()} kg`;
        }
    }
}

document.addEventListener('DOMContentLoaded', function () {
    document.getElementById("mode-value").addEventListener("click", () => switchMode("value"));
    document.getElementById("mode-weight").addEventListener("click", () => switchMode("weight"));
});

</script>
    
