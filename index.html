<html>
<head>
<link rel="icon" href="https://static.wikia.nocookie.net/growagarden/images/4/4a/Site-favicon.ico">
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>GAG Calc</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Varela+Round&display=swap');
</style>
<style>
/* Tùy chỉnh màu sắc và font chữ */
:root {
    --bg-primary: #121212;
    --bg-secondary: #1e1e1e;
    --card-bg: rgba(30, 30, 30, 0.8);
    --border-color: rgba(255, 255, 255, 0.1);
    --text-primary: #f0f0f0;
    --text-secondary: #b0b0b0;
    --accent-color-1: #667eea;
    --accent-color-2: #764ba2;
    --error-color: #ff6b6b;
    --primary-gradient: linear-gradient(135deg, var(--accent-color-1) 0%, var(--accent-color-2) 100%);
}

body {
    font-family: 'Varela Round', sans-serif;
    background-color: var(--bg-primary);
    color: var(--text-primary);
    margin: 0;
    padding: 20px;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
}

/* Kiểu dáng chung cho toàn bộ calculator */
.plant-calculator {
    background: var(--card-bg);
    backdrop-filter: blur(10px);
    border: 1px solid var(--border-color);
    border-radius: 20px;
    padding: 2rem;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    max-width: 600px;
    width: 100%;
    animation: fadeIn 0.8s ease-out;
}

h2 {
    text-align: center;
    font-size: 2rem;
    font-weight: 800;
    background: var(--primary-gradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 2rem;
}

label {
    display: block;
    font-weight: 600;
    margin-top: 1.5rem;
    margin-bottom: 0.5rem;
    color: var(--text-secondary);
}

/* Kiểu dáng cho các trường input và select */
select, input[type="number"] {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid var(--border-color);
    border-radius: 10px;
    background-color: var(--bg-secondary);
    color: var(--text-primary);
    font-family: 'Varela Round', sans-serif;
    font-size: 1rem;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
}

select:focus, input[type="number"]:focus {
    outline: none;
    border-color: var(--accent-color-1);
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.3);
}

/* Ẩn mũi tên mặc định trên select và input type="number" */
select::-ms-expand {
    display: none;
}
select {
    background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23b0b0b0%22%20d%3D%22M287%20197.8L154.4%2065.2c-4.4-4.4-11.4-4.4-15.8%200L5.4%20197.8c-4.4%204.4-4.4%2011.4%200%2015.8l15.8%2015.8c4.4%204.4%2011.4%204.4%2015.8%200L146.5%20121l111.4%20111.4c4.4%204.4%2011.4%204.4%2015.8%200l15.8-15.8c4.4-4.4%204.4-11.4%200-15.8z%22%2F%3E%3C%2Fsvg%3E');
    background-repeat: no-repeat;
    background-position: right 15px center;
    background-size: 12px;
}
input[type="number"]::-webkit-inner-spin-button, 
input[type="number"]::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
}
input[type="number"] {
    -moz-appearance: textfield;
}

/* Các tab mode */
.mode-toggle {
  display: flex;
  justify-content: center; /* căn giữa ngang các nút */
  gap: 14px; /* khoảng cách giữa các nút */
  margin-bottom: 20px;
}

.mode-tab {
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    background: var(--bg-secondary);
    color: var(--text-secondary);
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
}

.mode-tab:hover {
    background: rgba(255, 255, 255, 0.05);
}

.mode-tab.active-tab {
    background: var(--primary-gradient);
    color: white;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
}

/* Các checkbox mutation - ĐÃ CẬP NHẬT */
.mutations-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 0.8rem;
    margin-top: 1rem;
    border: 1px solid var(--border-color);
    padding: 1rem;
    border-radius: 10px;
    background-color: var(--bg-secondary);
}

.mutation-label {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    color: var(--text-secondary);
    transition: color 0.3s ease;
}

.mutation-label:hover {
    color: var(--text-primary);
}

.mutation-label input[type="checkbox"] {
    appearance: none;
    width: 18px;
    height: 18px;
    border: 2px solid var(--text-secondary);
    border-radius: 4px;
    cursor: pointer;
    position: relative;
    transition: all 0.3s ease;
}

.mutation-label input[type="checkbox"]:checked {
    background-color: var(--accent-color-1);
    border-color: var(--accent-color-1);
    animation: bounceIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.27);
}

.mutation-label input[type="checkbox"]:checked::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 16px;
    height: 16px;
    transform: translate(-50%, -50%);
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="%23ffffff" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"/></svg>');
    background-repeat: no-repeat;
    background-size: contain;
    animation: checkmark 0.3s ease-out forwards;
}

/* Nút bấm */
.button-container {
    display: flex;
    gap: 1rem;
    justify-content: center;
    margin-top: 2.5rem;
}

.calculate-btn, .reset-btn {
    padding: 12px 25px;
    border: none;
    border-radius: 12px;
    font-size: 1.1rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
}

.calculate-btn {
    background: var(--primary-gradient);
    color: white;
    box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3);
}

.calculate-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
}

.reset-btn {
    background: var(--bg-secondary);
    color: var(--text-secondary);
    border: 1px solid var(--border-color);
}

.reset-btn:hover {
    transform: translateY(-2px);
    background-color: rgba(255, 255, 255, 0.05);
    color: var(--text-primary);
}

/* Khu vực kết quả - ĐÃ CẬP NHẬT */
.result {
    margin-top: 2rem;
    padding: 1.5rem;
    border: 1px dashed var(--accent-color-1);
    border-radius: 12px;
    text-align: center;
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--text-primary);
    background: rgba(102, 126, 234, 0.1);
    animation: fadeIn 0.5s ease-out;
}

/* Kiểu dáng cho thông báo lỗi */
.result.error {
    background-color: rgba(255, 107, 107, 0.1);
    border-color: var(--error-color);
    color: var(--error-color);
}

/* Animations */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes bounceIn {
    0% { transform: scale(0.9); opacity: 0; }
    50% { transform: scale(1.1); opacity: 1; }
    100% { transform: scale(1); }
}

@keyframes checkmark {
    from {
        transform: translate(-50%, -50%) scale(0.5);
        opacity: 0;
    }
    to {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
    }
}

/* Responsive design */
@media (max-width: 600px) {
    .plant-calculator {
        padding: 1.5rem;
        margin: 10px;
    }

    h2 {
        font-size: 1.5rem;
    }
    
    .mutations-container {
        grid-template-columns: 1fr;
    }

    .button-container {
        flex-direction: column;
    }
    
    .calculate-btn, .reset-btn {
        width: 100%;
    }
}
/* Custom scrollbar for Webkit browsers (Chrome, Safari, Edge) */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: var(--bg-secondary);
  border-radius: 10px;
}

::-webkit-scrollbar-thumb {
  background: var(--accent-color-1);
  border-radius: 10px;
  border: 2px solid var(--bg-secondary);
}

::-webkit-scrollbar-thumb:hover {
  background: var(--accent-color-2);
}

/* Fallback for Firefox */
/* Lưu ý: Firefox chỉ hỗ trợ tùy chỉnh màu sắc cơ bản, không tùy chỉnh hình dạng */
@supports (scrollbar-color: var(--accent-color-1) var(--bg-secondary)) {
  * {
    scrollbar-color: var(--accent-color-1) var(--bg-secondary);
    scrollbar-width: thin;
  }
}
</style>
</head>
<body>

<div class="plant-calculator">
    <div id="template-content" style="display: block;"></div><h2 id="sec-6">Value Calculator</h2>
    <div class="mode-toggle" style="justify-content: center; margin-bottom: 20px;">
    <button id="mode-value" class="mode-tab active-tab">Calculate Value</button>
    <button id="mode-weight" class="mode-tab">Calculate Weight</button>
    </div>

    <label for="fruit-select">Fruit:</label>
    <select id="fruit-select"><option value="">Select a fruit...</option><option value="Aloe Vera">Aloe Vera</option><option value="Amber Spine">Amber Spine</option><option value="Apple">Apple</option><option value="Artichoke">Artichoke</option><option value="Avocado">Avocado</option><option value="Badland Pepper">Badland Pepper</option><option value="Bamboo">Bamboo</option><option value="Banana">Banana</option><option value="Beanstalk">Beanstalk</option><option value="Bee Balm">Bee Balm</option><option value="Bell Pepper">Bell Pepper</option><option value="Bendboo">Bendboo</option><option value="Bitter Melon">Bitter Melon</option><option value="Blood Banana">Blood Banana</option><option value="Blue Lollipop">Blue Lollipop</option><option value="Blueberry">Blueberry</option><option value="Bone Blossom">Bone Blossom</option><option value="Boneboo">Boneboo</option><option value="Burning Bud">Burning Bud</option><option value="Butternut Squash">Butternut Squash</option><option value="Cacao">Cacao</option><option value="Cactus">Cactus</option><option value="Candy Blossom">Candy Blossom</option><option value="Candy Sunflower">Candy Sunflower</option><option value="Cantaloupe">Cantaloupe</option><option value="Carrot">Carrot</option><option value="Cauliflower">Cauliflower</option><option value="Celestiberry">Celestiberry</option><option value="Cherry Blossom">Cherry Blossom</option><option value="Chocolate Carrot">Chocolate Carrot</option><option value="Coconut">Coconut</option><option value="Cocovine">Cocovine</option><option value="Corn">Corn</option><option value="Cranberry">Cranberry</option><option value="Crimson Vine">Crimson Vine</option><option value="Crocus">Crocus</option><option value="Crown Melon">Crown Melon</option><option value="Cursed Fruit">Cursed Fruit</option><option value="Daffodil">Daffodil</option><option value="Dandelion">Dandelion</option><option value="Delphinium">Delphinium</option><option value="Dezen">Dezen</option><option value="Dragon Fruit">Dragon Fruit</option><option value="Dragon Pepper">Dragon Pepper</option><option value="Durian">Durian</option><option value="Easter Egg">Easter Egg</option><option value="Eggplant">Eggplant</option><option value="Elder Strawberry">Elder Strawberry</option><option value="Elephant Ears">Elephant Ears</option><option value="Ember Lily">Ember Lily</option><option value="Enkaku">Enkaku</option><option value="Feijoa">Feijoa</option><option value="Firefly Fern">Firefly Fern</option><option value="Firework Flower">Firework Flower</option><option value="Fossilight">Fossilight</option><option value="Foxglove">Foxglove</option><option value="Fruit Ball">Fruit Ball</option><option value="Giant Pinecone">Giant Pinecone</option><option value="Glowshroom">Glowshroom</option><option value="Grand Tomato">Grand Tomato</option><option value="Grand Volcania">Grand Volcania</option><option value="Grape">Grape</option><option value="Green Apple">Green Apple</option><option value="Guanabana">Guanabana</option><option value="Hinomai">Hinomai</option><option value="Hive Fruit">Hive Fruit</option><option value="Honeysuckle">Honeysuckle</option><option value="Horned Dinoshroom">Horned Dinoshroom</option><option value="Horsetail">Horsetail</option><option value="Ice Cream Bean">Ice Cream Bean</option><option value="Jalapeno">Jalapeno</option><option value="King Cabbage">King Cabbage</option><option value="Kiwi">Kiwi</option><option value="Lavender">Lavender</option><option value="Lemon">Lemon</option><option value="Liberty Lily">Liberty Lily</option><option value="Lilac">Lilac</option><option value="Lily of the Valley">Lily of the Valley</option><option value="Lime">Lime</option><option value="Lingonberry">Lingonberry</option><option value="Loquat">Loquat</option><option value="Lotus">Lotus</option><option value="Lucky Bamboo">Lucky Bamboo</option><option value="Lumira">Lumira</option><option value="Mango">Mango</option><option value="Manuka Flower">Manuka Flower</option><option value="Maple Apple">Maple Apple</option><option value="Mega Mushroom">Mega Mushroom</option><option value="Merica Mushroom">Merica Mushroom</option><option value="Mint">Mint</option><option value="Mono Blooma">Mono Blooma</option><option value="Moon Blossom">Moon Blossom</option><option value="Moon Mango">Moon Mango</option><option value="Moon Melon">Moon Melon</option><option value="Moonflower">Moonflower</option><option value="Moonglow">Moonglow</option><option value="Mushroom">Mushroom</option><option value="Nectar Thorn">Nectar Thorn</option><option value="Nectarine">Nectarine</option><option value="Nectarshade">Nectarshade</option><option value="Nightshade">Nightshade</option><option value="Noble Flower">Noble Flower</option><option value="Onion">Onion</option><option value="Orange Tulip">Orange Tulip</option><option value="Papaya">Papaya</option><option value="Paradise Petal">Paradise Petal</option><option value="Parasol Flower">Parasol Flower</option><option value="Passionfruit">Passionfruit</option><option value="Peace Lily">Peace Lily</option><option value="Peach">Peach</option><option value="Pear">Pear</option><option value="Pepper">Pepper</option><option value="Pineapple">Pineapple</option><option value="Pink Lily">Pink Lily</option><option value="Pink Tulip">Pink Tulip</option><option value="Pitcher Plant">Pitcher Plant</option><option value="Prickle Fruit">Prickle Fruit</option><option value="Prickly Pear">Prickly Pear</option><option value="Pumpkin">Pumpkin</option><option value="Purple Cabbage">Purple Cabbage</option><option value="Purple Dahlia">Purple Dahlia</option><option value="Rafflesia">Rafflesia</option><option value="Raspberry">Raspberry</option><option value="Red Lollipop">Red Lollipop</option><option value="Rhubarb">Rhubarb</option><option value="Rose">Rose</option><option value="Rosy Delight">Rosy Delight</option><option value="Sakura Bush">Sakura Bush</option><option value="Serenity">Serenity</option><option value="Soft Sunshine">Soft Sunshine</option><option value="Soul Fruit">Soul Fruit</option><option value="Spiked Mango">Spiked Mango</option><option value="Spring Onion">Spring Onion</option><option value="Starfruit">Starfruit</option><option value="Stonebite">Stonebite</option><option value="Strawberry">Strawberry</option><option value="Succulent">Succulent</option><option value="Sugar Apple">Sugar Apple</option><option value="Sugar Glaze">Sugar Glaze</option><option value="Suncoil">Suncoil</option><option value="Sunflower">Sunflower</option><option value="Taco Fern">Taco Fern</option><option value="Tall Asparagus">Tall Asparagus</option><option value="Taro Flower">Taro Flower</option><option value="Tomato">Tomato</option><option value="Tranquil Bloom">Tranquil Bloom</option><option value="Traveler's Fruit">Traveler's Fruit</option><option value="Twisted Tangle">Twisted Tangle</option><option value="Vein Petal">Vein Petal</option><option value="Venus Fly Trap">Venus Fly Trap</option><option value="Violet Corn">Violet Corn</option><option value="Watermelon">Watermelon</option><option value="White Mulberry">White Mulberry</option><option value="Wild Carrot">Wild Carrot</option><option value="Zen Flare">Zen Flare</option><option value="Zen Rocks">Zen Rocks</option></select>

<!-- Value Mode -->
<div id="value-mode-section" style="display: block;">
  <label for="weight-input">Weight (kg):</label>
  <input type="number" id="weight-input" step="0.001" min="0" placeholder="Enter weight in kg">
</div>

<!-- Weight Mode -->
<div id="weight-mode-section" style="display: none;">
  <label for="value-input">Target Value (¢):</label>
  <input type="number" id="value-input" step="1" min="0" placeholder="Enter target value in cents">
</div>

    <label for="variant-select">Variant:</label>
    <select id="variant-select"><option value="Normal">Normal (1x)</option><option value="Gold">Gold (20x)</option><option value="Rainbow">Rainbow (50x)</option></select>

    <label>Mutations:</label>
    <div class="mutations-container" id="mutations-container"><label class="mutation-label"><input type="checkbox" value="Acidic" name="mutation">Acidic (15x)</label><label class="mutation-label"><input type="checkbox" value="Alienlike" name="mutation">Alienlike (100x)</label><label class="mutation-label"><input type="checkbox" value="Amber" name="mutation">Amber (10x)</label><label class="mutation-label"><input type="checkbox" value="AncientAmber" name="mutation">AncientAmber (50x)</label><label class="mutation-label"><input type="checkbox" value="Aromatic" name="mutation">Aromatic (15x)</label><label class="mutation-label"><input type="checkbox" value="Aurora" name="mutation">Aurora (90x)</label><label class="mutation-label"><input type="checkbox" value="Blitzshock" name="mutation">Blitzshock (50x)</label><label class="mutation-label"><input type="checkbox" value="Bloodlit" name="mutation">Bloodlit (4x)</label><label class="mutation-label"><input type="checkbox" value="Boil" name="mutation">Boil (15x)</label><label class="mutation-label"><input type="checkbox" value="Burnt" name="mutation">Burnt (4x)</label><label class="mutation-label"><input type="checkbox" value="Celestial" name="mutation">Celestial (120x)</label><label class="mutation-label"><input type="checkbox" value="Ceramic" name="mutation">Ceramic (30x)</label><label class="mutation-label"><input type="checkbox" value="Chakra" name="mutation">Chakra (15x)</label><label class="mutation-label"><input type="checkbox" value="Chilled" name="mutation">Chilled (2x)</label><label class="mutation-label"><input type="checkbox" value="Choc" name="mutation">Choc (2x)</label><label class="mutation-label"><input type="checkbox" value="Clay" name="mutation">Clay (5x)</label><label class="mutation-label"><input type="checkbox" value="Cloudtouched" name="mutation">Cloudtouched (5x)</label><label class="mutation-label"><input type="checkbox" value="Cooked" name="mutation">Cooked (10x)</label><label class="mutation-label"><input type="checkbox" value="Corrupt" name="mutation">Corrupt (20x)</label><label class="mutation-label"><input type="checkbox" value="Dawnbound" name="mutation">Dawnbound (150x)</label><label class="mutation-label"><input type="checkbox" value="Disco" name="mutation">Disco (125x)</label><label class="mutation-label"><input type="checkbox" value="Drenched" name="mutation">Drenched (5x)</label><label class="mutation-label"><input type="checkbox" value="Foxfire" name="mutation">Foxfire (90x)</label><label class="mutation-label"><input type="checkbox" value="Fried" name="mutation">Fried (8x)</label><label class="mutation-label"><input type="checkbox" value="Friendbound" name="mutation">Friendbound (70x)</label><label class="mutation-label"><input type="checkbox" value="Frozen" name="mutation">Frozen (10x)</label><label class="mutation-label"><input type="checkbox" value="Galactic" name="mutation">Galactic (120x)</label><label class="mutation-label"><input type="checkbox" value="Harmonisedchakra" name="mutation">Harmonisedchakra (35x)</label><label class="mutation-label"><input type="checkbox" value="Harmonisedfoxfire" name="mutation">Harmonisedfoxfire (190x)</label><label class="mutation-label"><input type="checkbox" value="Heavenly" name="mutation">Heavenly (5x)</label><label class="mutation-label"><input type="checkbox" value="HoneyGlazed" name="mutation">HoneyGlazed (5x)</label><label class="mutation-label"><input type="checkbox" value="Infected" name="mutation">Infected (75x)</label><label class="mutation-label"><input type="checkbox" value="Jackpot" name="mutation">Jackpot (15x)</label><label class="mutation-label"><input type="checkbox" value="Junkshock" name="mutation">Junkshock (45x)</label><label class="mutation-label"><input type="checkbox" value="Meatball" name="mutation">Meatball (3x)</label><label class="mutation-label"><input type="checkbox" value="Meteoric" name="mutation">Meteoric (125x)</label><label class="mutation-label"><input type="checkbox" value="Molten" name="mutation">Molten (25x)</label><label class="mutation-label"><input type="checkbox" value="Moonlit" name="mutation">Moonlit (2x)</label><label class="mutation-label"><input type="checkbox" value="Oil" name="mutation">Oil (15x)</label><label class="mutation-label"><input type="checkbox" value="OldAmber" name="mutation">OldAmber (20x)</label><label class="mutation-label"><input type="checkbox" value="Paradisal" name="mutation">Paradisal (100x)</label><label class="mutation-label"><input type="checkbox" value="Pasta" name="mutation">Pasta (3x)</label><label class="mutation-label"><input type="checkbox" value="Plasma" name="mutation">Plasma (5x)</label><label class="mutation-label"><input type="checkbox" value="Pollinated" name="mutation">Pollinated (3x)</label><label class="mutation-label"><input type="checkbox" value="Radioactive" name="mutation">Radioactive (80x)</label><label class="mutation-label"><input type="checkbox" value="Sandy" name="mutation">Sandy (3x)</label><label class="mutation-label"><input type="checkbox" value="Sauce" name="mutation">Sauce (3x)</label><label class="mutation-label"><input type="checkbox" value="Shocked" name="mutation">Shocked (100x)</label><label class="mutation-label"><input type="checkbox" value="Sliced" name="mutation">Sliced (50x)</label><label class="mutation-label"><input type="checkbox" value="Spaghetti" name="mutation">Spaghetti (12x)</label><label class="mutation-label"><input type="checkbox" value="Static" name="mutation">Static (8x)</label><label class="mutation-label"><input type="checkbox" value="Subzero" name="mutation">Subzero (40x)</label><label class="mutation-label"><input type="checkbox" value="Sundried" name="mutation">Sundried (85x)</label><label class="mutation-label"><input type="checkbox" value="Tempestuous" name="mutation">Tempestuous (12x)</label><label class="mutation-label"><input type="checkbox" value="Touchdown" name="mutation">Touchdown (105x)</label><label class="mutation-label"><input type="checkbox" value="Toxic" name="mutation">Toxic (12x)</label><label class="mutation-label"><input type="checkbox" value="Tranquil" name="mutation">Tranquil (20x)</label><label class="mutation-label"><input type="checkbox" value="Twisted" name="mutation">Twisted (5x)</label><label class="mutation-label"><input type="checkbox" value="Verdant" name="mutation">Verdant (4x)</label><label class="mutation-label"><input type="checkbox" value="Voidtouched" name="mutation">Voidtouched (135x)</label><label class="mutation-label"><input type="checkbox" value="Wet" name="mutation">Wet (2x)</label><label class="mutation-label"><input type="checkbox" value="Wiltproof" name="mutation">Wiltproof (4x)</label><label class="mutation-label"><input type="checkbox" value="Windstruck" name="mutation">Windstruck (2x)</label><label class="mutation-label"><input type="checkbox" value="Zombified" name="mutation">Zombified (25x)</label></div>
    
    <div class="button-container">
        <button class="reset-btn" id="reset-btn" style="display: none">Reset</button>
        <button class="calculate-btn" id="calculate-btn">Calculate Value</button>
    </div>
    <div class="result" id="result">Hi, user</div>
</div>

<script src="data:text/javascript;base64,CiAgICAvLyDigJTigJTigJQgSVRFTSBEQVRBIOKAlOKAlOKAlAoKICAgIGNvbnN0IGl0ZW1EYXRhID0gewogIkFsb2UgVmVyYSI6IFsKICAgICAgICA1LjUsCiAgICAgICAgNjkwMDAsCiAgICAgICAgMzUwCiAgICBdLAogICAgIkFwcGxlIjogWwogICAgICAgIDMsCiAgICAgICAgMjc1LAogICAgICAgIDUwCiAgICBdLAogICAgIkF2b2NhZG8iOiBbCiAgICAgICAgNi41LAogICAgICAgIDM1MCwKICAgICAgICAzMDAKICAgIF0sCiAgICAiQmFtYm9vIjogWwogICAgICAgIDQsCiAgICAgICAgNDAwMCwKICAgICAgICAzNQogICAgXSwKICAgICJCYW5hbmEiOiBbCiAgICAgICAgMS41LAogICAgICAgIDE3NTAsCiAgICAgICAgMTAwCiAgICBdLAogICAgIkJlYW5zdGFsayI6IFsKICAgICAgICAxMCwKICAgICAgICAyODAwMCwKICAgICAgICAzMDAKICAgIF0sCiAgICAiQmVlIEJhbG0iOiBbCiAgICAgICAgMSwKICAgICAgICAxODAwMCwKICAgICAgICAyMDAKICAgIF0sCiAgICAiQmVsbCBQZXBwZXIiOiBbCiAgICAgICAgOCwKICAgICAgICA1NTAwLAogICAgICAgIDMyNQogICAgXSwKICAgICJCZW5kYm9vIjogWwogICAgICAgIDE4LAogICAgICAgIDE1NTAwMCwKICAgICAgICAyNzUKICAgIF0sCiAgICAiQmxvb2QgQmFuYW5hIjogWwogICAgICAgIDEuNSwKICAgICAgICA2MDAwLAogICAgICAgIDIwMAogICAgXSwKICAgICJCbHVlIExvbGxpcG9wIjogWwogICAgICAgIDEsCiAgICAgICAgNTAwMDAsCiAgICAgICAgNjUKICAgIF0sCiAgICAiQmx1ZWJlcnJ5IjogWwogICAgICAgIDAuMiwKICAgICAgICAyMCwKICAgICAgICAxMDAKICAgIF0sCiAgICAiQm9uZSBCbG9zc29tIjogWwogICAgICAgIDcsCiAgICAgICAgMTc1MDAwLAogICAgICAgIDIwMAogICAgXSwKICAgICJCb25lYm9vIjogWwogICAgICAgIDE1LAogICAgICAgIDE0MTE0MSwKICAgICAgICAzMDAKICAgIF0sCiAgICAiQnVybmluZyBCdWQiOiBbCiAgICAgICAgMTIsCiAgICAgICAgNzAwMDAsCiAgICAgICAgNTAwCiAgICBdLAogICAgIkNhY2FvIjogWwogICAgICAgIDgsCiAgICAgICAgMTIwMDAsCiAgICAgICAgMjUwCiAgICBdLAogICAgIkNhY3R1cyI6IFsKICAgICAgICA3LAogICAgICAgIDM0MDAsCiAgICAgICAgMTAwCiAgICBdLAogICAgIkNhbmR5IEJsb3Nzb20iOiBbCiAgICAgICAgMywKICAgICAgICAxMDAwMDAsCiAgICAgICAgNDAKICAgIF0sCiAgICAiQ2FuZHkgU3VuZmxvd2VyIjogWwogICAgICAgIDEuNSwKICAgICAgICA4MDAwMCwKICAgICAgICA4NQogICAgXSwKICAgICJDYW50YWxvdXBlIjogWwogICAgICAgIDUuNSwKICAgICAgICAzNDAwMCwKICAgICAgICAyNTAKICAgIF0sCiAgICAiQ2Fycm90IjogWwogICAgICAgIDAuMjc1LAogICAgICAgIDIwLAogICAgICAgIDEwMAogICAgXSwKICAgICJDYXVsaWZsb3dlciI6IFsKICAgICAgICA1LAogICAgICAgIDUwLAogICAgICAgIDE1MAogICAgXSwKICAgICJDZWxlc3RpYmVycnkiOiBbCiAgICAgICAgMiwKICAgICAgICAxMDAwMCwKICAgICAgICAyMDAKICAgIF0sCiAgICAiQ2hlcnJ5IEJsb3Nzb20iOiBbCiAgICAgICAgMywKICAgICAgICA1MDAsCiAgICAgICAgNDAwCiAgICBdLAogICAgIkNob2NvbGF0ZSBDYXJyb3QiOiBbCiAgICAgICAgMC4yNzUsCiAgICAgICAgMTEwMDAsCiAgICAgICAgMTAwCiAgICBdLAogICAgIkNvY29udXQiOiBbCiAgICAgICAgMTQsCiAgICAgICAgNDAwLAogICAgICAgIDcwCiAgICBdLAogICAgIkNvY292aW5lIjogWwogICAgICAgIDE0LAogICAgICAgIDY2NjY2LAogICAgICAgIDI3NQogICAgXSwKICAgICJDb3JuIjogWwogICAgICAgIDIsCiAgICAgICAgNDAsCiAgICAgICAgMTAwCiAgICBdLAogICAgIkNyYW5iZXJyeSI6IFsKICAgICAgICAxLAogICAgICAgIDM1MDAsCiAgICAgICAgNTAKICAgIF0sCiAgICAiQ3JpbXNvbiBWaW5lIjogWwogICAgICAgIDEsCiAgICAgICAgMTI1MCwKICAgICAgICAxMDAKICAgIF0sCiAgICAiQ3JvY3VzIjogWwogICAgICAgIDAuMjc1LAogICAgICAgIDMwMDAwLAogICAgICAgIDE1MAogICAgXSwKICAgICJDdXJzZWQgRnJ1aXQiOiBbCiAgICAgICAgMzAsCiAgICAgICAgMjU3NTAsCiAgICAgICAgMjAwCiAgICBdLAogICAgIkRhZmZvZGlsIjogWwogICAgICAgIDAuMiwKICAgICAgICAxMDAwLAogICAgICAgIDQ1CiAgICBdLAogICAgIkRhbmRlbGlvbiI6IFsKICAgICAgICA0LAogICAgICAgIDUwMDAwLAogICAgICAgIDMwMAogICAgXSwKICAgICJEZWxwaGluaXVtIjogWwogICAgICAgIDAuMywKICAgICAgICAyNDAwMCwKICAgICAgICAxMDAKICAgIF0sCiAgICAiRHJhZ29uIEZydWl0IjogWwogICAgICAgIDEyLAogICAgICAgIDQ3NTAsCiAgICAgICAgMTAwCiAgICBdLAogICAgIkRyYWdvbiBQZXBwZXIiOiBbCiAgICAgICAgNiwKICAgICAgICA4ODg4OCwKICAgICAgICAzMDAKICAgIF0sCiAgICAiRHVyaWFuIjogWwogICAgICAgIDgsCiAgICAgICAgNzUwMCwKICAgICAgICAyMDAKICAgIF0sCiAgICAiRWFzdGVyIEVnZyI6IFsKICAgICAgICAzLAogICAgICAgIDI1MDAsCiAgICAgICAgMjAKICAgIF0sCiAgICAiRWdncGxhbnQiOiBbCiAgICAgICAgNSwKICAgICAgICAxMjAwMCwKICAgICAgICAyMjAKICAgIF0sCiAgICAiRWxlcGhhbnQgRWFycyI6IFsKICAgICAgICAxOCwKICAgICAgICA3NzAwMCwKICAgICAgICA1MDAKICAgIF0sCiAgICAiRW1iZXIgTGlseSI6IFsKICAgICAgICAxMiwKICAgICAgICA2NjY2NiwKICAgICAgICA0NTAKICAgIF0sCiAgICAiRmVpam9hIjogWwogICAgICAgIDEwLAogICAgICAgIDEzMDAwLAogICAgICAgIDQwMAogICAgXSwKICAgICJGaXJlZmx5IEZlcm4iOiBbCiAgICAgICAgNSwKICAgICAgICA3MjAwMCwKICAgICAgICA0MDAKICAgIF0sCiAgICAiRmlyZXdvcmsgRmxvd2VyIjogWwogICAgICAgIDIwLAogICAgICAgIDE1MTAwMCwKICAgICAgICA0NTAKICAgIF0sCiAgICAiRm9zc2lsaWdodCI6IFsKICAgICAgICA0LAogICAgICAgIDg4MDAwLAogICAgICAgIDUwMAogICAgXSwKICAgICJGb3hnbG92ZSI6IFsKICAgICAgICAyLAogICAgICAgIDIwMDAwLAogICAgICAgIDI1MAogICAgXSwKICAgICJHbG93c2hyb29tIjogWwogICAgICAgIDAuNzUsCiAgICAgICAgMzAwLAogICAgICAgIDEwMAogICAgXSwKICAgICJHcmFwZSI6IFsKICAgICAgICAzLAogICAgICAgIDc4NTAsCiAgICAgICAgMjAwCiAgICBdLAogICAgIkdyZWVuIEFwcGxlIjogWwogICAgICAgIDMsCiAgICAgICAgMzAwLAogICAgICAgIDIwMAogICAgXSwKICAgICJHdWFuYWJhbmEiOiBbCiAgICAgICAgNCwKICAgICAgICA3MDUwMCwKICAgICAgICA0MDAKICAgIF0sCiAgICAiSGl2ZSBGcnVpdCI6IFsKICAgICAgICA4LAogICAgICAgIDYyMDAwLAogICAgICAgIDMwMAogICAgXSwKICAgICJIb25leXN1Y2tsZSI6IFsKICAgICAgICAxMiwKICAgICAgICAxMDAwMDAsCiAgICAgICAgNDAwCiAgICBdLAogICAgIkhvcm5lZCBEaW5vc2hyb29tIjogWwogICAgICAgIDUsCiAgICAgICAgNjkwMDAsCiAgICAgICAgMjc1CiAgICBdLAogICAgIkljZSBDcmVhbSBCZWFuIjogWwogICAgICAgIDQsCiAgICAgICAgNDUwMCwKICAgICAgICAyMDAKICAgIF0sCiAgICAiS2l3aSI6IFsKICAgICAgICA1LAogICAgICAgIDI3NTAsCiAgICAgICAgMzAwCiAgICBdLAogICAgIkxhdmVuZGVyIjogWwogICAgICAgIDAuMjc1LAogICAgICAgIDI1MDAwLAogICAgICAgIDkwCiAgICBdLAogICAgIkxlbW9uIjogWwogICAgICAgIDEsCiAgICAgICAgMzUwLAogICAgICAgIDUwCiAgICBdLAogICAgIkxpYmVydHkgTGlseSI6IFsKICAgICAgICA2LjUsCiAgICAgICAgMzAwMDAsCiAgICAgICAgMzUwCiAgICBdLAogICAgIkxpbGFjIjogWwogICAgICAgIDMsCiAgICAgICAgMzUwMDAsCiAgICAgICAgMjUwCiAgICBdLAogICAgIkxpbHkgb2YgdGhlIFZhbGxleSI6IFsKICAgICAgICA2LAogICAgICAgIDQ5MTIwLAogICAgICAgIDQwMAogICAgXSwKICAgICJMaW1lIjogWwogICAgICAgIDEsCiAgICAgICAgMTAwMCwKICAgICAgICAxMjUKICAgIF0sCiAgICAiTG9xdWF0IjogWwogICAgICAgIDYuNSwKICAgICAgICA4MDAwLAogICAgICAgIDIwMAogICAgXSwKICAgICJMb3R1cyI6IFsKICAgICAgICAyMCwKICAgICAgICAzNTAwMCwKICAgICAgICA2NTAKICAgIF0sCiAgICAiTHVtaXJhIjogWwogICAgICAgIDYsCiAgICAgICAgODUwMDAsCiAgICAgICAgMzUwCiAgICBdLAogICAgIk1hbmdvIjogWwogICAgICAgIDE1LAogICAgICAgIDY1MDAsCiAgICAgICAgMjAwCiAgICBdLAogICAgIk1hbnVrYSBGbG93ZXIiOiBbCiAgICAgICAgMC4zLAogICAgICAgIDI1MDAwLAogICAgICAgIDIwMAogICAgXSwKICAgICJNZWdhIE11c2hyb29tIjogWwogICAgICAgIDcwLAogICAgICAgIDUwMCwKICAgICAgICAyMDAwMDAwCiAgICBdLAogICAgIk1lcmljYSBNdXNocm9vbSI6IFsKICAgICAgICAzMCwKICAgICAgICA0MDAwMCwKICAgICAgICAyMAogICAgXSwKICAgICJNaW50IjogWwogICAgICAgIDEsCiAgICAgICAgNTI1MCwKICAgICAgICAxNTAKICAgIF0sCiAgICAiTW9vbiBCbG9zc29tIjogWwogICAgICAgIDMsCiAgICAgICAgNjY2NjYsCiAgICAgICAgNDAwCiAgICBdLAogICAgIk1vb24gTWFuZ28iOiBbCiAgICAgICAgMTUsCiAgICAgICAgNTAwMDAsCiAgICAgICAgMzAwCiAgICBdLAogICAgIk1vb24gTWVsb24iOiBbCiAgICAgICAgOCwKICAgICAgICAxODAwMCwKICAgICAgICAzMDAKICAgIF0sCiAgICAiTW9vbmZsb3dlciI6IFsKICAgICAgICAyLAogICAgICAgIDk1MDAsCiAgICAgICAgMjAwCiAgICBdLAogICAgIk1vb25nbG93IjogWwogICAgICAgIDcsCiAgICAgICAgMjUwMDAsCiAgICAgICAgNDAwCiAgICBdLAogICAgIk11c2hyb29tIjogWwogICAgICAgIDI1LAogICAgICAgIDE1MTAwMCwKICAgICAgICAyMjAKICAgIF0sCiAgICAiTmVjdGFyIFRob3JuIjogWwogICAgICAgIDcsCiAgICAgICAgNDQ0NDQsCiAgICAgICAgMzUwCiAgICBdLAogICAgIk5lY3RhcmluZSI6IFsKICAgICAgICAzLAogICAgICAgIDQ4MDAwLAogICAgICAgIDIwMAogICAgXSwKICAgICJOZWN0YXJzaGFkZSI6IFsKICAgICAgICAwLjgsCiAgICAgICAgNTAwMDAsCiAgICAgICAgMTAwCiAgICBdLAogICAgIk5pZ2h0c2hhZGUiOiBbCiAgICAgICAgMC41LAogICAgICAgIDM1MDAsCiAgICAgICAgMTAwCiAgICBdLAogICAgIk5vYmxlIEZsb3dlciI6IFsKICAgICAgICA1LAogICAgICAgIDIwMDAwLAogICAgICAgIDI1MAogICAgXSwKICAgICJPcmFuZ2UgVHVsaXAiOiBbCiAgICAgICAgMC4wNSwKICAgICAgICA4NTAsCiAgICAgICAgNTUKICAgIF0sCiAgICAiUGFwYXlhIjogWwogICAgICAgIDMsCiAgICAgICAgMTAwMCwKICAgICAgICA2MAogICAgXSwKICAgICJQYXJhZGlzZSBQZXRhbCI6IFsKICAgICAgICAyLjc1LAogICAgICAgIDI1MDAwLAogICAgICAgIDI1MAogICAgXSwKICAgICJQYXJhc29sIEZsb3dlciI6IFsKICAgICAgICA2LAogICAgICAgIDIwMDAwMCwKICAgICAgICAzNTAKICAgIF0sCiAgICAiUGFzc2lvbmZydWl0IjogWwogICAgICAgIDMsCiAgICAgICAgMzU1MCwKICAgICAgICA0MAogICAgXSwKICAgICJQZWFjZSBMaWx5IjogWwogICAgICAgIDAuNiwKICAgICAgICAyNDAwMCwKICAgICAgICAxMDAKICAgIF0sCiAgICAiUGVhY2giOiBbCiAgICAgICAgMiwKICAgICAgICAzMDAsCiAgICAgICAgNzAKICAgIF0sCiAgICAiUGVhciI6IFsKICAgICAgICAzLAogICAgICAgIDIwMDAwLAogICAgICAgIDEyMAogICAgXSwKICAgICJQZXBwZXIiOiBbCiAgICAgICAgNSwKICAgICAgICA4MDAwLAogICAgICAgIDIwMAogICAgXSwKICAgICJQaW5lYXBwbGUiOiBbCiAgICAgICAgMywKICAgICAgICAyMDAwLAogICAgICAgIDcwCiAgICBdLAogICAgIlBpbmsgTGlseSI6IFsKICAgICAgICA2LAogICAgICAgIDY1MDAwLAogICAgICAgIDQwMAogICAgXSwKICAgICJQaW5rIFR1bGlwIjogWwogICAgICAgIDAuMDUsCiAgICAgICAgODUwLAogICAgICAgIDU1CiAgICBdLAogICAgIlBpdGNoZXIgUGxhbnQiOiBbCiAgICAgICAgMTIsCiAgICAgICAgNTIwMDAsCiAgICAgICAgMjc1CiAgICBdLAogICAgIlByaWNrbHkgUGVhciI6IFsKICAgICAgICA3LAogICAgICAgIDcwMDAsCiAgICAgICAgMzc1CiAgICBdLAogICAgIlB1bXBraW4iOiBbCiAgICAgICAgOCwKICAgICAgICAzNDAwLAogICAgICAgIDgwCiAgICBdLAogICAgIlB1cnBsZSBDYWJiYWdlIjogWwogICAgICAgIDUsCiAgICAgICAgNTAwLAogICAgICAgIDcwCiAgICBdLAogICAgIlB1cnBsZSBEYWhsaWEiOiBbCiAgICAgICAgMTIsCiAgICAgICAgNzUwMDAsCiAgICAgICAgNDAwCiAgICBdLAogICAgIlJhZmZsZXNpYSI6IFsKICAgICAgICA4LAogICAgICAgIDM1MDAsCiAgICAgICAgODAKICAgIF0sCiAgICAiUmFzcGJlcnJ5IjogWwogICAgICAgIDAuNzUsCiAgICAgICAgMTAwLAogICAgICAgIDcwCiAgICBdLAogICAgIlJlZCBMb2xsaXBvcCI6IFsKICAgICAgICA0LAogICAgICAgIDUwMDAwLAogICAgICAgIDY1CiAgICBdLAogICAgIlJvc2UiOiBbCiAgICAgICAgMSwKICAgICAgICA1MDAwLAogICAgICAgIDEwMAogICAgXSwKICAgICJSb3N5IERlbGlnaHQiOiBbCiAgICAgICAgMTAsCiAgICAgICAgNjkwMDAsCiAgICAgICAgNDUwCiAgICBdLAogICAgIlNvdWwgRnJ1aXQiOiBbCiAgICAgICAgMjUsCiAgICAgICAgNzc1MCwKICAgICAgICAyMDAKICAgIF0sCiAgICAiU3RhcmZydWl0IjogWwogICAgICAgIDMsCiAgICAgICAgMTUwMDAsCiAgICAgICAgMjUwCiAgICBdLAogICAgIlN0b25lYml0ZSI6IFsKICAgICAgICAxLAogICAgICAgIDM1MDAwLAogICAgICAgIDIwMAogICAgXSwKICAgICJTdHJhd2JlcnJ5IjogWwogICAgICAgIDAuMywKICAgICAgICAxNSwKICAgICAgICAxMDAKICAgIF0sCiAgICAiU3VjY3VsZW50IjogWwogICAgICAgIDUsCiAgICAgICAgMjUwMDAsCiAgICAgICAgMTc1CiAgICBdLAogICAgIlN1Z2FyIEFwcGxlIjogWwogICAgICAgIDksCiAgICAgICAgNDgwMDAsCiAgICAgICAgMjAwCiAgICBdLAogICAgIlN1bmNvaWwiOiBbCiAgICAgICAgMTAsCiAgICAgICAgODAwMDAsCiAgICAgICAgNDAwCiAgICBdLAogICAgIlN1bmZsb3dlciI6IFsKICAgICAgICAxNi41LAogICAgICAgIDE2MDAwMCwKICAgICAgICA2MDAKICAgIF0sCiAgICAiVG9tYXRvIjogWwogICAgICAgIDAuNSwKICAgICAgICAzMCwKICAgICAgICAxMDAKICAgIF0sCiAgICAiVHJhdmVsZXIncyBGcnVpdCI6IFsKICAgICAgICAxNSwKICAgICAgICA1OTAwMCwKICAgICAgICA1MDAKICAgIF0sCiAgICAiVmVudXMgRmx5IFRyYXAiOiBbCiAgICAgICAgMTAsCiAgICAgICAgODUwMDAsCiAgICAgICAgNjUwCiAgICBdLAogICAgIlZpb2xldCBDb3JuIjogWwogICAgICAgIDMsCiAgICAgICAgNTAwMDAsCiAgICAgICAgMjUwCiAgICBdLAogICAgIldhdGVybWVsb24iOiBbCiAgICAgICAgNywKICAgICAgICAzMDAwLAogICAgICAgIDcwCiAgICBdLAogICAgIldoaXRlIE11bGJlcnJ5IjogWwogICAgICAgIDMsCiAgICAgICAgMzAwMCwKICAgICAgICAyMDAKICAgIF0sCiAgICAiV2lsZCBDYXJyb3QiOiBbCiAgICAgICAgMS4zLAogICAgICAgIDI1MDAwLAogICAgICAgIDEwMAogICAgXSwKIkhvcnNldGFpbCI6IFsyLjg1LCAyNzA3NSwgLTFdLAoiR2lhbnQgUGluZWNvbmUiOiBbNS4xNCwgNjQ5ODAsIC0xXSwKIkxpbmdvbmJlcnJ5IjogWzAuNDg1LCAzMTU4OCwgLTFdLAoiR3JhbmQgVm9sY2FuaWEiOiBbNi42NSwgNjM2NzYsIC0xXSwKIkFtYmVyIFNwaW5lIjogWzUuNywgNDk2MzgsIC0xXSwKIk1vbm8gQmxvb21hIjogWzAuNDc3LCAxOTg1NSwgLTFdLAoiU2VyZW5pdHkiOiBbMC4yNCwgMzE1ODgsIC0xXSwKIlNvZnQgU3Vuc2hpbmUiOiBbMS45MCwgNDA2MTMsIC0xXSwKIlRhcm8gRmxvd2VyIjogWzYuNjQsIDEwODMwMCwgLTFdLAoiU3Bpa2VkIE1hbmdvIjogWzE0LjI1LCA2MDkxOSwgLTFdLAoiWmVuIFJvY2tzIjogWzE3LjEsIDEzNTM3NSwgLTFdLAoiSGlub21haSI6IFs5LjUsIDcyMjAwLCAtMV0sCiJNYXBsZSBBcHBsZSI6IFsyLjg1LCA1MTUyMSwgLTFdLAoiWmVuIEZsYXJlIjogWzEuMzQsIDIyNTYzLCAtMV0sCiJEZXplbiI6IFsxLjkwLCAyNjM5OCwgLTFdLAoiRW5rYWt1IjogWzQuNzUsIDU1OTU1LCAtMV0sCiJUcmFucXVpbCBCbG9vbSI6IFszLjc5LCA4NDIyMywgLTFdLAoiU2FrdXJhIEJ1c2giOiBbMS40MiwgMjU3ODksIC0xXSwKIkx1Y2t5IEJhbWJvbyI6IFs0Ljc1LCA1ODY2MywgLTFdLAoiRWxkZXIgU3RyYXdiZXJyeSI6IFs1LjM3LCA3MjA5MiwgLTFdLAoiRnJ1aXQgQmFsbCI6IFs1LjcyLCAzMTU4OCwgLTFdLAoiVHdpc3RlZCBUYW5nbGUiOiBbMi44NSwgMTgwNTAsIC0xXSwKIlZlaW4gUGV0YWwiOiBbNy44LCA0NTEyNSwgLTFdLAoiQXJ0aWNob2tlIjogWzEuNDMsIDI3MDc1LCAtMV0sCiJDcm93biBNZWxvbiI6IFs0LjI4LCA0NTEyNSwgLTFdLAoiU3VnYXIgR2xhemUiOiBbMS4wMCwgMzAwMDAsIC0xXSwKIkphbGFwZW5vIjogWzMuODEsIDI3MDc1LCAtMV0sCiJPbmlvbiI6IFsxLjQyLCA5MDI1LCAtMV0sCiJUYWxsIEFzcGFyYWd1cyI6IFs2LjUsIDY1OTUyLCAtMV0sCiJHcmFuZCBUb21hdG8iOiBbNy42LCA3OTQyMCwgLTFdLAoiVGFjbyBGZXJuIjogWzguOTYsIDc0MjUyLCAtMV0sCiJSaHViYXJiIjogWzEuOTAsIDEzNTM4LCAtMV0sCiJCYWRsYW5kIFBlcHBlciI6IFszLjMzLCA0MDYxMywgLTFdLAoiUHJpY2tsZSBGcnVpdCI6IFs3LjUsIDcwMzEyLCAtMV0sCiJTcHJpbmcgT25pb24iOiBbMS40MiwgMjcwNzUsIC0xXSwKIkJ1dHRlcm51dCBTcXVhc2giOiBbNC41LCAyODMwOSwgLTFdLAoiS2luZyBDYWJiYWdlIjogWzcuNSwgODMyNTAsIC0xXSwKIkJpdHRlciBNZWxvbiI6IFsyLjg1LCA1MDk2MCwgLTFdCiAgICB9OwogICAgLy8g4oCU4oCU4oCUIFZBUklBTlQgTVVMVElQTElFUlMg4oCU4oCU4oCUCiAgICBjb25zdCB2YXJpYW50TXVsdGlwbGllcnMgPSB7CiAgICAgICAgIk5vcm1hbCI6IDEsCiAgICAgICAgIkdvbGQiOiAyMCwKICAgICAgICAiUmFpbmJvdyI6IDUwLAogICAgfTsKCiAgICAvLyDigJTigJTigJQgTVVUQVRJT04gREFUQSDigJTigJTigJQKICAgIGNvbnN0IG11dGF0aW9uRGF0YSA9IFsKewogICAgIm5hbWUiOiAiTWV0ZW9yaWMiLAogICAgInZhbHVlTXVsdGkiOiAxMjUKICB9LAogIHsKICAgICJuYW1lIjogIkNlbGVzdGlhbCIsCiAgICAidmFsdWVNdWx0aSI6IDEyMAogIH0sCiAgewogICAgIm5hbWUiOiAiV2luZHN0cnVjayIsCiAgICAidmFsdWVNdWx0aSI6IDIKICB9LAogIHsKICAgICJuYW1lIjogIkZyaWVkIiwKICAgICJ2YWx1ZU11bHRpIjogOAogIH0sCiAgewogICAgIm5hbWUiOiAiQnVybnQiLAogICAgInZhbHVlTXVsdGkiOiA0CiAgfSwKICB7CiAgICAibmFtZSI6ICJEcmVuY2hlZCIsCiAgICAidmFsdWVNdWx0aSI6IDUKICB9LAogIHsKICAgICJuYW1lIjogIlNob2NrZWQiLAogICAgInZhbHVlTXVsdGkiOiAxMDAKICB9LAogIHsKICAgICJuYW1lIjogIkF1cm9yYSIsCiAgICAidmFsdWVNdWx0aSI6IDkwCiAgfSwKICB7CiAgICAibmFtZSI6ICJDaG9jIiwKICAgICJ2YWx1ZU11bHRpIjogMgogIH0sCiAgewogICAgIm5hbWUiOiAiQmxvb2RsaXQiLAogICAgInZhbHVlTXVsdGkiOiA0CiAgfSwKICB7CiAgICAibmFtZSI6ICJQYXJhZGlzYWwiLAogICAgInZhbHVlTXVsdGkiOiAxMDAKICB9LAogIHsKICAgICJuYW1lIjogIkNsYXkiLAogICAgInZhbHVlTXVsdGkiOiA1CiAgfSwKICB7CiAgICAibmFtZSI6ICJBbWJlciIsCiAgICAidmFsdWVNdWx0aSI6IDEwCiAgfSwKICB7CiAgICAibmFtZSI6ICJab21iaWZpZWQiLAogICAgInZhbHVlTXVsdGkiOiAyNQogIH0sCiAgewogICAgIm5hbWUiOiAiSG9uZXlHbGF6ZWQiLAogICAgInZhbHVlTXVsdGkiOiA1CiAgfSwKICB7CiAgICAibmFtZSI6ICJGcm96ZW4iLAogICAgInZhbHVlTXVsdGkiOiAxMAogIH0sCiAgewogICAgIm5hbWUiOiAiT2xkQW1iZXIiLAogICAgInZhbHVlTXVsdGkiOiAyMAogIH0sCiAgewogICAgIm5hbWUiOiAiVmVyZGFudCIsCiAgICAidmFsdWVNdWx0aSI6IDQKICB9LAogIHsKICAgICJuYW1lIjogIlNhbmR5IiwKICAgICJ2YWx1ZU11bHRpIjogMwogIH0sCiAgewogICAgIm5hbWUiOiAiTW9vbmxpdCIsCiAgICAidmFsdWVNdWx0aSI6IDIKICB9LAogIHsKICAgICJuYW1lIjogIkFuY2llbnRBbWJlciIsCiAgICAidmFsdWVNdWx0aSI6IDUwCiAgfSwKICB7CiAgICAibmFtZSI6ICJDZXJhbWljIiwKICAgICJ2YWx1ZU11bHRpIjogMzAKICB9LAogIHsKICAgICJuYW1lIjogIlBvbGxpbmF0ZWQiLAogICAgInZhbHVlTXVsdGkiOiAzCiAgfSwKICB7CiAgICAibmFtZSI6ICJEaXNjbyIsCiAgICAidmFsdWVNdWx0aSI6IDEyNQogIH0sCiAgewogICAgIm5hbWUiOiAiVHdpc3RlZCIsCiAgICAidmFsdWVNdWx0aSI6IDUKICB9LAogIHsKICAgICJuYW1lIjogIkFsaWVubGlrZSIsCiAgICAidmFsdWVNdWx0aSI6IDEwMAogIH0sCiAgewogICAgIm5hbWUiOiAiUGxhc21hIiwKICAgICJ2YWx1ZU11bHRpIjogNQogIH0sCiAgewogICAgIm5hbWUiOiAiTW9sdGVuIiwKICAgICJ2YWx1ZU11bHRpIjogMjUKICB9LAogIHsKICAgICJuYW1lIjogIkRhd25ib3VuZCIsCiAgICAidmFsdWVNdWx0aSI6IDE1MAogIH0sCiAgewogICAgIm5hbWUiOiAiQ29va2VkIiwKICAgICJ2YWx1ZU11bHRpIjogMTAKICB9LAogIHsKICAgICJuYW1lIjogIkNoaWxsZWQiLAogICAgInZhbHVlTXVsdGkiOiAyCiAgfSwKICB7CiAgICAibmFtZSI6ICJIZWF2ZW5seSIsCiAgICAidmFsdWVNdWx0aSI6IDUKICB9LAogIHsKICAgICJuYW1lIjogIldpbHRwcm9vZiIsCiAgICAidmFsdWVNdWx0aSI6IDQKICB9LAogIHsKICAgICJuYW1lIjogIlN1bmRyaWVkIiwKICAgICJ2YWx1ZU11bHRpIjogODUKICB9LAogIHsKICAgICJuYW1lIjogIkdhbGFjdGljIiwKICAgICJ2YWx1ZU11bHRpIjogMTIwCiAgfSwKICB7CiAgICAibmFtZSI6ICJWb2lkdG91Y2hlZCIsCiAgICAidmFsdWVNdWx0aSI6IDEzNQogIH0sCiAgewogICAgIm5hbWUiOiAiV2V0IiwKICAgICJ2YWx1ZU11bHRpIjogMgogIH0sCiAgewogICAgIm5hbWUiOiAiQ2xvdWR0b3VjaGVkIiwKICAgICJ2YWx1ZU11bHRpIjogNQogIH0sCnsKICAibmFtZSI6ICJGcmllbmRib3VuZCIsCiAgInZhbHVlTXVsdGkiOiA3MAp9LAp7CiAgIm5hbWUiOiAiVGVtcGVzdHVvdXMiLAogICJ2YWx1ZU11bHRpIjogMTIKfSwKewogICJuYW1lIjogIkluZmVjdGVkIiwKICAidmFsdWVNdWx0aSI6IDc1Cn0sCnsKICAibmFtZSI6ICJUcmFucXVpbCIsCiAgInZhbHVlTXVsdGkiOiAyMAp9LAp7CiAgIm5hbWUiOiAiQ29ycnVwdCIsCiAgInZhbHVlTXVsdGkiOiAyMAp9LAp7CiAgIm5hbWUiOiAiQ2hha3JhIiwKICAidmFsdWVNdWx0aSI6IDE1Cn0sCnsKICAibmFtZSI6ICJIYXJtb25pc2VkY2hha3JhIiwKICAidmFsdWVNdWx0aSI6IDM1Cn0sCnsKICAibmFtZSI6ICJGb3hmaXJlIiwKICAidmFsdWVNdWx0aSI6IDkwCn0sCnsKICAibmFtZSI6ICJIYXJtb25pc2VkZm94ZmlyZSIsCiAgInZhbHVlTXVsdGkiOiAxOTAKfSwKewogICJuYW1lIjogIlRveGljIiwKICAidmFsdWVNdWx0aSI6IDEyCn0sCnsKICAibmFtZSI6ICJSYWRpb2FjdGl2ZSIsCiAgInZhbHVlTXVsdGkiOiA4MAp9LAp7CiAgIm5hbWUiOiAiSmFja3BvdCIsCiAgInZhbHVlTXVsdGkiOiAxNQp9LAp7CiAgIm5hbWUiOiAiU3ViemVybyIsCiAgInZhbHVlTXVsdGkiOiA0MAp9LAp7CiAgIm5hbWUiOiAiQmxpdHpzaG9jayIsCiAgInZhbHVlTXVsdGkiOiA1MAp9LAp7CiAgIm5hbWUiOiAiVG91Y2hkb3duIiwKICAidmFsdWVNdWx0aSI6IDEwNQp9LAp7CiAgIm5hbWUiOiAiU3RhdGljIiwKICAidmFsdWVNdWx0aSI6IDgKfSwKewogICJuYW1lIjogIlNsaWNlZCIsCiAgInZhbHVlTXVsdGkiOiA1MAp9LAp7CiAgIm5hbWUiOiAiU2F1Y2UiLAogICJ2YWx1ZU11bHRpIjogMwp9LAp7CiAgIm5hbWUiOiAiUGFzdGEiLAogICJ2YWx1ZU11bHRpIjogMwp9LAp7CiAgIm5hbWUiOiAiTWVhdGJhbGwiLAogICJ2YWx1ZU11bHRpIjogMwp9LAp7CiAgIm5hbWUiOiAiU3BhZ2hldHRpIiwKICAidmFsdWVNdWx0aSI6IDEyCn0sCnsKICAibmFtZSI6ICJBY2lkaWMiLAogICJ2YWx1ZU11bHRpIjogMTUKfSwKewogICJuYW1lIjogIkFyb21hdGljIiwKICAidmFsdWVNdWx0aSI6IDE1Cn0sCnsKICAibmFtZSI6ICJPaWwiLAogICJ2YWx1ZU11bHRpIjogMTUKfSwKewogICJuYW1lIjogIkJvaWwiLAogICJ2YWx1ZU11bHRpIjogMTUKfSwKewogICJuYW1lIjogIkp1bmtzaG9jayIsCiAgInZhbHVlTXVsdGkiOiA0NQp9CiAgICBdOwoKICAgIGZ1bmN0aW9uIFJldHVybl9EYXRhKGl0ZW1OYW1lKSB7CiAgICAgICAgcmV0dXJuIGl0ZW1EYXRhW2l0ZW1OYW1lXSA/PyBudWxsOwogICAgfQoKICAgIC8qKgogICAgICogQHBhcmFtIHtzdHJpbmd9IHZhcmlhbnROYW1lCiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfQogICAgICovCiAgICBmdW5jdGlvbiBSZXR1cm5fTXVsdGlwbGllcih2YXJpYW50TmFtZSkgewogICAgICAgIHJldHVybiB2YXJpYW50TXVsdGlwbGllcnNbdmFyaWFudE5hbWVdID8/IDE7CiAgICB9CgogICAgLyoqCiAgICAgKiBAcGFyYW0ge3sgTXV0YXRpb25zOiBzdHJpbmdbXSB9fSBwbGFudAogICAgICogQHJldHVybnMge251bWJlcn0KICAgICAqLwogICAgZnVuY3Rpb24gQ2FsY1ZhbHVlTXVsdGkocGxhbnQpIHsKICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocGxhbnQuTXV0YXRpb25zKSkgcmV0dXJuIDE7CgogICAgICAgIGxldCBzdW0gPSAxOwogICAgICAgIGZvciAoY29uc3QgbXV0TmFtZSBvZiBwbGFudC5NdXRhdGlvbnMpIHsKICAgICAgICAgICAgY29uc3QgbSA9IG11dGF0aW9uRGF0YS5maW5kKG0gPT4gbS5uYW1lID09PSBtdXROYW1lKTsKICAgICAgICAgICAgaWYgKG0pIHN1bSArPSAobS52YWx1ZU11bHRpIC0gMSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gTWF0aC5tYXgoMSwgc3VtKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBwYXJhbSB7eyBJdGVtX1N0cmluZzogc3RyaW5nLCBWYXJpYW50OiBzdHJpbmcsIFdlaWdodDogbnVtYmVyLCBNdXRhdGlvbnM/OiBzdHJpbmdbXSB9fSBwbGFudAogICAgICogQHJldHVybnMge251bWJlcn0KICAgICAqLwogICAgZnVuY3Rpb24gQ2FsY3VsYXRlUGxhbnRWYWx1ZShwbGFudCkgewogICAgICAgIGNvbnN0IGl0ZW1OYW1lID0gcGxhbnQuSXRlbV9TdHJpbmc7CiAgICAgICAgY29uc3QgdmFyaWFudCA9IHBsYW50LlZhcmlhbnQ7CiAgICAgICAgY29uc3Qgd2VpZ2h0ID0gcGxhbnQuV2VpZ2h0OwogICAgICAgIGlmICghaXRlbU5hbWUgfHwgIXZhcmlhbnQgfHwgdHlwZW9mIHdlaWdodCAhPT0gIm51bWJlciIpIHJldHVybiAwOwoKICAgICAgICBjb25zdCBkYXRhID0gUmV0dXJuX0RhdGEoaXRlbU5hbWUpOwogICAgICAgIGlmICghZGF0YSkgewogICAgICAgICAgICBjb25zb2xlLndhcm4oIkNhbGN1bGF0ZVBsYW50VmFsdWUgfCBJdGVtRGF0YSBpcyBpbnZhbGlkIik7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgW2Jhc2VXZWlnaHQsIGJhc2VWYWx1ZV0gPSBkYXRhOwogICAgICAgIGNvbnN0IGNsYW1wZWQgPSBNYXRoLm1heCgwLjk1LCBNYXRoLm1pbih3ZWlnaHQgLyBiYXNlV2VpZ2h0LCAxZTgpKTsKICAgICAgICBjb25zdCBtdWx0aSA9IENhbGNWYWx1ZU11bHRpKHBsYW50KSAqIFJldHVybl9NdWx0aXBsaWVyKHZhcmlhbnQpOwoKICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChiYXNlVmFsdWUgKiBtdWx0aSAqIChjbGFtcGVkICogY2xhbXBlZCkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHBvcHVsYXRlRnJ1aXRPcHRpb25zKCkgewogICAgICAgIGNvbnN0IGZydWl0U2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZydWl0LXNlbGVjdCIpOwogICAgICAgIGZydWl0U2VsZWN0LmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSIiPlNlbGVjdCBhIGZydWl0Li4uPC9vcHRpb24+JzsKICAgICAgICBPYmplY3Qua2V5cyhpdGVtRGF0YSkuc29ydCgpLmZvckVhY2goZnJ1aXQgPT4gewogICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gZnJ1aXQ7CiAgICAgICAgICAgIG9wdGlvbi50ZXh0Q29udGVudCA9IGZydWl0OwogICAgICAgICAgICBmcnVpdFNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pOwogICAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIHBvcHVsYXRlVmFyaWFudE9wdGlvbnMoKSB7CiAgICAgICAgY29uc3QgdmFyaWFudFNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ2YXJpYW50LXNlbGVjdCIpOwogICAgICAgIHZhcmlhbnRTZWxlY3QuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgT2JqZWN0LmtleXModmFyaWFudE11bHRpcGxpZXJzKS5mb3JFYWNoKHZhcmlhbnQgPT4gewogICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gdmFyaWFudDsKICAgICAgICAgICAgb3B0aW9uLnRleHRDb250ZW50ID0gdmFyaWFudCArICIgKCIgKyB2YXJpYW50TXVsdGlwbGllcnNbdmFyaWFudF0gKyAieCkiOwogICAgICAgICAgICB2YXJpYW50U2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7CiAgICAgICAgfSk7CiAgICB9CgogICAgLy8gUG9wdWxhdGUgbXV0YXRpb24gY2hlY2tib3hlcwogICAgZnVuY3Rpb24gcG9wdWxhdGVNdXRhdGlvbk9wdGlvbnMoKSB7CiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm11dGF0aW9ucy1jb250YWluZXIiKTsKICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7CgogICAgICAgIC8vIFNvcnQgbXV0YXRpb25zIGFscGhhYmV0aWNhbGx5IGJ5IG5hbWUKICAgICAgICBjb25zdCBzb3J0ZWRNdXRhdGlvbnMgPSBbLi4ubXV0YXRpb25EYXRhXS5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKTsKCiAgICAgICAgc29ydGVkTXV0YXRpb25zLmZvckVhY2goKGEpID0+IHsKICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwogICAgICAgICAgICBsYWJlbC5jbGFzc05hbWUgPSAnbXV0YXRpb24tbGFiZWwnOwoKICAgICAgICAgICAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwogICAgICAgICAgICBjaGVja2JveC50eXBlID0gImNoZWNrYm94IjsKICAgICAgICAgICAgY2hlY2tib3gudmFsdWUgPSBhLm5hbWU7CiAgICAgICAgICAgIGNoZWNrYm94Lm5hbWUgPSAibXV0YXRpb24iOwoKICAgICAgICAgICAgbGFiZWwuYXBwZW5kQ2hpbGQoY2hlY2tib3gpOwogICAgICAgICAgICBsYWJlbC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhLm5hbWUgKyAiICgiICsgYS52YWx1ZU11bHRpICsgIngpIikpOwogICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobGFiZWwpOwogICAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIG9uQ2FsY3VsYXRlQ2xpY2soKSB7CiAgICAgICAgY29uc3QgZnJ1aXRTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZnJ1aXQtc2VsZWN0Iik7CiAgICAgICAgY29uc3Qgd2VpZ2h0SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgid2VpZ2h0LWlucHV0Iik7CiAgICAgICAgY29uc3QgdmFyaWFudFNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ2YXJpYW50LXNlbGVjdCIpOwogICAgICAgIGNvbnN0IG11dGF0aW9uQ2hlY2tib3hlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W25hbWU9Im11dGF0aW9uIl06Y2hlY2tlZCcpOwogICAgICAgIGNvbnN0IHJlc3VsdERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJyZXN1bHQiKTsKCiAgICAgICAgY29uc3QgcGxhbnQgPSB7CiAgICAgICAgICAgIEl0ZW1fU3RyaW5nOiBmcnVpdFNlbGVjdC52YWx1ZSwKICAgICAgICAgICAgVmFyaWFudDogdmFyaWFudFNlbGVjdC52YWx1ZSwKICAgICAgICAgICAgV2VpZ2h0OiBwYXJzZUZsb2F0KHdlaWdodElucHV0LnZhbHVlKSwKICAgICAgICAgICAgTXV0YXRpb25zOiBBcnJheS5mcm9tKG11dGF0aW9uQ2hlY2tib3hlcykubWFwKGNiID0+IGNiLnZhbHVlKQogICAgICAgIH0KCiAgICAgICAgcmVzdWx0RGl2LmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yJyk7CgogICAgICAgIGlmICghcGxhbnQuSXRlbV9TdHJpbmcpIHsKICAgICAgICAgICAgcmVzdWx0RGl2LnRleHRDb250ZW50ID0gIlBsZWFzZSBzZWxlY3QgYSBmcnVpdC4iOwogICAgICAgICAgICByZXN1bHREaXYuY2xhc3NMaXN0LmFkZCgnZXJyb3InKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoaXNOYU4ocGxhbnQuV2VpZ2h0KSB8fCBwbGFudC5XZWlnaHQgPD0gMCkgewogICAgICAgICAgICByZXN1bHREaXYudGV4dENvbnRlbnQgPSAiUGxlYXNlIGVudGVyIGEgdmFsaWQgcG9zaXRpdmUgd2VpZ2h0LiI7CiAgICAgICAgICAgIHJlc3VsdERpdi5jbGFzc0xpc3QuYWRkKCdlcnJvcicpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBjb25zdCBmaW5hbFZhbHVlID0gQ2FsY3VsYXRlUGxhbnRWYWx1ZShwbGFudCk7CiAgICAgICAgcmVzdWx0RGl2LnRleHRDb250ZW50ID0gYEZpbmFsIFBsYW50IFZhbHVlOiDCoiR7ZmluYWxWYWx1ZS50b0xvY2FsZVN0cmluZygpfWA7CiAgICB9CgogICAgZnVuY3Rpb24gb25SZXNldENsaWNrKCkgewogICAgICAgIC8vIFJlc2V0IGZydWl0IHNlbGVjdGlvbgogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmcnVpdC1zZWxlY3QiKS52YWx1ZSA9ICIiOwoKICAgICAgICAvLyBSZXNldCB3ZWlnaHQgaW5wdXQKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgid2VpZ2h0LWlucHV0IikudmFsdWUgPSAiIjsKCiAgICAgICAgLy8gUmVzZXQgdmFyaWFudCB0byBmaXJzdCBvcHRpb24gKE5vcm1hbCkKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidmFyaWFudC1zZWxlY3QiKS52YWx1ZSA9ICJOb3JtYWwiOwoKICAgICAgICAvLyBVbmNoZWNrIGFsbCBtdXRhdGlvbiBjaGVja2JveGVzCiAgICAgICAgY29uc3QgbXV0YXRpb25DaGVja2JveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbbmFtZT0ibXV0YXRpb24iXScpOwogICAgICAgIG11dGF0aW9uQ2hlY2tib3hlcy5mb3JFYWNoKGNoZWNrYm94ID0+IHsKICAgICAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IGZhbHNlOwogICAgICAgIH0pOwoKICAgICAgICAvLyBSZXNldCByZXN1bHQgZGlzcGxheQogICAgICAgIGNvbnN0IHJlc3VsdERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJyZXN1bHQiKTsKICAgICAgICByZXN1bHREaXYudGV4dENvbnRlbnQgPSAiIjsKICAgICAgICByZXN1bHREaXYuY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTsKICAgIH0KCiAgICAvLyBJbml0aWFsaXplIHdoZW4gRE9NIGlzIHJlYWR5CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkgewogICAgICAgIHBvcHVsYXRlRnJ1aXRPcHRpb25zKCk7CiAgICAgICAgcG9wdWxhdGVNdXRhdGlvbk9wdGlvbnMoKTsKICAgICAgICBwb3B1bGF0ZVZhcmlhbnRPcHRpb25zKCk7CgogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjYWxjdWxhdGUtYnRuIikuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBvbkNhbGN1bGF0ZUNsaWNrKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicmVzZXQtYnRuIikuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBvblJlc2V0Q2xpY2spOwoKICAgICAgICAvLyBBZGQgRW50ZXIga2V5IHN1cHBvcnQgZm9yIHdlaWdodCBpbnB1dAogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ3ZWlnaHQtaW5wdXQiKS5hZGRFdmVudExpc3RlbmVyKCJrZXlwcmVzcyIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gIkVudGVyIikgewogICAgICAgICAgICAgICAgb25DYWxjdWxhdGVDbGljaygpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9KTsKCiAgICAvLyBJZiBET01Db250ZW50TG9hZGVkIGFscmVhZHkgZmlyZWQsIHJ1biBpbW1lZGlhdGVseQogICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdsb2FkaW5nJykgewogICAgICAgIC8vIFN0aWxsIGxvYWRpbmcsIHdhaXQgZm9yIERPTUNvbnRlbnRMb2FkZWQKICAgIH0gZWxzZSB7CiAgICAgICAgLy8gQWxyZWFkeSBsb2FkZWQKICAgICAgICBwb3B1bGF0ZUZydWl0T3B0aW9ucygpOwogICAgICAgIHBvcHVsYXRlTXV0YXRpb25PcHRpb25zKCk7CiAgICAgICAgcG9wdWxhdGVWYXJpYW50T3B0aW9ucygpOwoKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2FsY3VsYXRlLWJ0biIpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgb25DYWxjdWxhdGVDbGljayk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJlc2V0LWJ0biIpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgb25SZXNldENsaWNrKTsKCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIndlaWdodC1pbnB1dCIpLmFkZEV2ZW50TGlzdGVuZXIoImtleXByZXNzIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgaWYgKGUua2V5ID09PSAiRW50ZXIiKSB7CiAgICAgICAgICAgICAgICBvbkNhbGN1bGF0ZUNsaWNrKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0KCiAgICBsZXQgY3VycmVudE1vZGUgPSAidmFsdWUiOwoKZnVuY3Rpb24gc3dpdGNoTW9kZShtb2RlKSB7CiAgICBjdXJyZW50TW9kZSA9IG1vZGU7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidmFsdWUtbW9kZS1zZWN0aW9uIikuc3R5bGUuZGlzcGxheSA9IG1vZGUgPT09ICJ2YWx1ZSIgPyAiYmxvY2siIDogIm5vbmUiOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIndlaWdodC1tb2RlLXNlY3Rpb24iKS5zdHlsZS5kaXNwbGF5ID0gbW9kZSA9PT0gIndlaWdodCIgPyAiYmxvY2siIDogIm5vbmUiOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNhbGN1bGF0ZS1idG4iKS50ZXh0Q29udGVudCA9IG1vZGUgPT09ICJ2YWx1ZSIgPyAiQ2FsY3VsYXRlIFZhbHVlIiA6ICJDYWxjdWxhdGUgV2VpZ2h0IjsKCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibW9kZS12YWx1ZSIpLmNsYXNzTGlzdC50b2dnbGUoImFjdGl2ZS10YWIiLCBtb2RlID09PSAidmFsdWUiKTsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtb2RlLXdlaWdodCIpLmNsYXNzTGlzdC50b2dnbGUoImFjdGl2ZS10YWIiLCBtb2RlID09PSAid2VpZ2h0Iik7Cn0KCmZ1bmN0aW9uIENhbGN1bGF0ZVdlaWdodEZyb21WYWx1ZShwbGFudCwgdGFyZ2V0VmFsdWUpIHsKICAgIGNvbnN0IGRhdGEgPSBSZXR1cm5fRGF0YShwbGFudC5JdGVtX1N0cmluZyk7CiAgICBpZiAoIWRhdGEpIHJldHVybiAwOwoKICAgIGNvbnN0IFtiYXNlV2VpZ2h0LCBiYXNlVmFsdWVdID0gZGF0YTsKICAgIGNvbnN0IHRvdGFsTXVsdGkgPSBDYWxjVmFsdWVNdWx0aShwbGFudCkgKiBSZXR1cm5fTXVsdGlwbGllcihwbGFudC5WYXJpYW50KTsKCiAgICBjb25zdCBkaXZpc29yID0gYmFzZVZhbHVlICogdG90YWxNdWx0aTsKICAgIGlmIChkaXZpc29yIDw9IDAgfHwgdGFyZ2V0VmFsdWUgPD0gMCkgcmV0dXJuIDA7CgogICAgY29uc3Qgd2VpZ2h0ID0gYmFzZVdlaWdodCAqIE1hdGguc3FydCh0YXJnZXRWYWx1ZSAvIGRpdmlzb3IpOwogICAgcmV0dXJuIE1hdGgucm91bmQod2VpZ2h0ICogMTAwMCkgLyAxMDAwOwp9CgoKCmZ1bmN0aW9uIG9uQ2FsY3VsYXRlQ2xpY2soKSB7CiAgICBjb25zdCBmcnVpdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmcnVpdC1zZWxlY3QiKS52YWx1ZTsKICAgIGNvbnN0IHZhcmlhbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidmFyaWFudC1zZWxlY3QiKS52YWx1ZTsKICAgIGNvbnN0IG11dGF0aW9ucyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbbmFtZT0ibXV0YXRpb24iXTpjaGVja2VkJykpLm1hcChjYiA9PiBjYi52YWx1ZSk7CiAgICBjb25zdCByZXN1bHREaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicmVzdWx0Iik7CgogICAgcmVzdWx0RGl2LmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yJyk7CgogICAgaWYgKCFmcnVpdCkgewogICAgICAgIHJlc3VsdERpdi50ZXh0Q29udGVudCA9ICJQbGVhc2Ugc2VsZWN0IGEgZnJ1aXQuIjsKICAgICAgICByZXN1bHREaXYuY2xhc3NMaXN0LmFkZCgiZXJyb3IiKTsKICAgICAgICByZXR1cm47CiAgICB9CgogICAgY29uc3QgcGxhbnQgPSB7CiAgICAgICAgSXRlbV9TdHJpbmc6IGZydWl0LAogICAgICAgIFZhcmlhbnQ6IHZhcmlhbnQsCiAgICAgICAgTXV0YXRpb25zOiBtdXRhdGlvbnMKICAgIH07CgogICAgaWYgKGN1cnJlbnRNb2RlID09PSAidmFsdWUiKSB7CiAgICAgICAgY29uc3Qgd2VpZ2h0ID0gcGFyc2VGbG9hdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgid2VpZ2h0LWlucHV0IikudmFsdWUpOwogICAgICAgIGlmIChpc05hTih3ZWlnaHQpIHx8IHdlaWdodCA8PSAwKSB7CiAgICAgICAgICAgIHJlc3VsdERpdi50ZXh0Q29udGVudCA9ICJQbGVhc2UgZW50ZXIgYSB2YWxpZCBwb3NpdGl2ZSB3ZWlnaHQuIjsKICAgICAgICAgICAgcmVzdWx0RGl2LmNsYXNzTGlzdC5hZGQoImVycm9yIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgcGxhbnQuV2VpZ2h0ID0gd2VpZ2h0OwogICAgICAgIGNvbnN0IHZhbCA9IENhbGN1bGF0ZVBsYW50VmFsdWUocGxhbnQpOwogICAgICAgIHJlc3VsdERpdi50ZXh0Q29udGVudCA9IGBGaW5hbCBQbGFudCBWYWx1ZTogwqIke3ZhbC50b0xvY2FsZVN0cmluZygpfWA7CiAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IHRhcmdldFZhbHVlID0gcGFyc2VGbG9hdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidmFsdWUtaW5wdXQiKS52YWx1ZSk7CiAgICAgICAgaWYgKGlzTmFOKHRhcmdldFZhbHVlKSB8fCB0YXJnZXRWYWx1ZSA8PSAwKSB7CiAgICAgICAgICAgIHJlc3VsdERpdi50ZXh0Q29udGVudCA9ICJQbGVhc2UgZW50ZXIgYSB2YWxpZCB0YXJnZXQgdmFsdWUuIjsKICAgICAgICAgICAgcmVzdWx0RGl2LmNsYXNzTGlzdC5hZGQoImVycm9yIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgY29uc3QgdyA9IENhbGN1bGF0ZVdlaWdodEZyb21WYWx1ZShwbGFudCwgdGFyZ2V0VmFsdWUpOwogICAgICAgIGNvbnN0IGRhdGEgPSBSZXR1cm5fRGF0YShwbGFudC5JdGVtX1N0cmluZyk7CiAgICAgICAgY29uc3QgW2Jhc2VXZWlnaHRdID0gZGF0YTsKICAgICAgICBjb25zdCBtaW5UaHJlc2hvbGQgPSBiYXNlV2VpZ2h0ICogMC45NTsKCiAgICAgICAgaWYgKHcgPD0gbWluVGhyZXNob2xkICsgMC4wMDEpIHsgLy8gU21hbGwgdG9sZXJhbmNlIGZvciBmbG9hdGluZyBwb2ludAogICAgICAgICAgICByZXN1bHREaXYudGV4dENvbnRlbnQgPSBgRXN0aW1hdGVkIFdlaWdodCBSZXF1aXJlZDog4omkJHt3LnRvTG9jYWxlU3RyaW5nKCl9IGtnIChhdCBtaW5pbXVtIHRocmVzaG9sZClgOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdERpdi50ZXh0Q29udGVudCA9IGBFc3RpbWF0ZWQgV2VpZ2h0IFJlcXVpcmVkOiAke3cudG9Mb2NhbGVTdHJpbmcoKX0ga2dgOwogICAgICAgIH0KICAgIH0KfQoKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtb2RlLXZhbHVlIikuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoKSA9PiBzd2l0Y2hNb2RlKCJ2YWx1ZSIpKTsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtb2RlLXdlaWdodCIpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gc3dpdGNoTW9kZSgid2VpZ2h0IikpOwp9KTsKCg==" data-rocket-status="executed">
